<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OMAPI: verify.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://code.google.com/p/openmovement/"><img border=0 alt="Logo" src="logo.png"/></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OMAPI
   &#160;<span id="projectnumber">1.8</span>
   </div>
   <div id="projectbrief">Open Movement Public API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('verify_8c_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">verify.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="verify_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* </span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2009-2012, Newcastle University, UK.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * All rights reserved.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without </span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions are met: </span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * 1. Redistributions of source code must retain the above copyright notice, </span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *    this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright notice, </span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *    this list of conditions and the following disclaimer in the documentation </span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *    and/or other materials provided with the distribution.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; </span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE </span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE </span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE </span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR </span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF </span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS </span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN </span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) </span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE </span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * POSSIBILITY OF SUCH DAMAGE. </span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/* Headers */</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#define _CRT_SECURE_NO_WARNINGS</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;io.h&gt;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#define access _access</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &lt;sys/timeb.h&gt;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#define gmtime_r(timer, result) gmtime_s(result, timer)</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#define timegm _mkgmtime</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#define tzset _tzset</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/* API header */</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="omapi_8h.html">omapi.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">/* LEDs */</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="verify_8c.html#a311495df9e6d39d78c1eadab5b325782">   71</a></span>&#160;<span class="preprocessor">#define LED_PROCESSING  OM_LED_YELLOW</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="verify_8c.html#adfbc06c2083b47ac3c2efe2934c9b285">   72</a></span>&#160;<span class="preprocessor">#define LED_OK          OM_LED_MAGENTA</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="verify_8c.html#a4d2944306d880e747f002c6b28051148">   73</a></span>&#160;<span class="preprocessor">#define LED_WARNING     OM_LED_MAGENTA</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="verify_8c.html#a26cf826f0be3be67648377434f77d010">   74</a></span>&#160;<span class="preprocessor">#define LED_FAILED      OM_LED_BLUE</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="verify_8c.html#a68952a88f882bddc8e58a27f4d7a9067">   75</a></span>&#160;<span class="preprocessor">#define LED_ERROR_COMMS OM_LED_CYAN</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/* Options */</span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="verify_8c.html#aa728cb580efcc9b65ad8c235767e6b55">   78</a></span>&#160;<span class="preprocessor">#define VERIFY_OPTION_ALL               0x01</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="verify_8c.html#a7effaa29b4ebb804cf0890c15ec32508">   79</a></span>&#160;<span class="preprocessor">#define VERIFY_OPTION_NO_CHECK_STOP     0x02</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="verify_8c.html#a416dcd5b28cb1f577ea27df5fa4c0ecb">   80</a></span>&#160;<span class="preprocessor">#define VERIFY_OPTION_OUTPUT_NEW        0x04</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/* Error measures */</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="verify_8c.html#a080ac2194de86d8acfc23706d1c7d9de">   83</a></span>&#160;<span class="preprocessor">#define STUCK_COUNT (50 * 120)</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="verify_8c.html#a489b573f8657cc4a892f86b80c1aa608">   84</a></span>&#160;<span class="preprocessor">#define AVERAGE_FACTOR 0.00001</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="verify_8c.html#a487b6057583dc10b18e976efacbe9edd">   85</a></span>&#160;<span class="preprocessor">#define AVERAGE_RANGE_MAX 0.400</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="verify_8c.html#ac5b01ce406ab803b55eb603ed5416aff">   86</a></span>&#160;<span class="preprocessor">#define AVERAGE_RANGE_OFF 0.300</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="verify_8c.html#a7db2d12bf20b1347de3f6b65bf8e3a47">   88</a></span>&#160;<span class="preprocessor">#define IGNORE_RECENT_RESTARTS (6*60*60)        // Enable this if the devices have been connected/disconnected recently (causing a break in the data)</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="verify_8c.html#a7163b20796481144b413eaea9cfca810">   92</a></span>&#160;<span class="preprocessor">#define ID_NAND</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="structdownload__t.html">   94</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="structdownload__t.html#aa516162e3010d50a13f5003009c99bb2">   96</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structdownload__t.html#aa516162e3010d50a13f5003009c99bb2">memoryHealth</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#ifdef ID_NAND</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="structdownload__t.html#a63661df236ca2570596f8f7854d5963c">   98</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> nandId[6];</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="structdownload__t.html#a382038a20a14caf59d49cae7332cc969">   99</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structdownload__t.html#a382038a20a14caf59d49cae7332cc969">nandType</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="structdownload__t.html#aeac90097f29f7529968697163cea5c18">  101</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structdownload__t.html#aeac90097f29f7529968697163cea5c18">filename</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="structdownload__t.html#a09c8ff5eedafe72a573fa656b27a9e5b">  102</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structdownload__t.html#a09c8ff5eedafe72a573fa656b27a9e5b">hasGyro</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// ???!!!</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;} <a class="code" href="structdownload__t.html">download_t</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> globalOptions = 0;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> globalAllowedRestarts = 0;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#ifdef ID_NAND</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">// &quot;NANDID=%02x:%02x:%02x:%02x:%02x:%02x,%d\r\n&quot;, id[0], id[1], id[2], id[3], id[4], id[5], nandPresent</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> NAND_DEVICE_DONT_CARE[6] = { 0x00 };</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> NAND_DEVICE_HY27UF084G2x[6] = { 0xAD, 0xDC, 0x00 };                     <span class="comment">// &quot;NAND_DEVICE_ALT&quot;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                                                                          <span class="comment">//??                                             0xad,0xdc,0x84,0x25,0xad,0x00,</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> NAND_DEVICE_HY27UF084G2B[6]   = { 0xAD, 0xDC, 0x10, 0x95, 0x54, 0x00 };   <span class="comment">// 1 &quot;NAND_DEVICE&quot;</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> NAND_DEVICE_HY27UF084G2M[6]   = { 0xAD, 0xDC, 0x80, 0x95, 0xAD, 0x00 };   <span class="comment">// 2 (one matched by &quot;NAND_DEVICE_ALT&quot;, the on-board check terminates after the first two bytes as it matches against NAND_DEVICE_HY27UF084G2x)</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> NAND_DEVICE_MT29F8G08AAA[6]   = { 0x2C, 0xD3, 0x90, 0x2E, 0x64, 0x00 };   <span class="comment">// 3</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> NAND_DEVICE_S34ML04G1[6]      = { 0x01, 0xDC, 0x90, 0x95, 0x54, 0x00 };   <span class="comment">// 4 &quot;NAND_DEVICE_ALT2&quot;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> NAND_DEVICE_MT29F8G08ABADA[6] = { 0x2C, 0xDC, 0x90, 0x95, 0x56, 0x00 };   <span class="comment">// 5 &quot;NAND_DEVICE_ALT3&quot; (actually 4G NAND_DEVICE_MT29F4G..., the on-board check terminates after the first two bytes)</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> OmGetNandId(<span class="keywordtype">int</span> deviceId, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span>, <span class="keywordtype">int</span> *present, <span class="keywordtype">int</span> *identified)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;{</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordtype">int</span> status;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">char</span> response[256], *parts[16] = {0};</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> localId[6] = {0};</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordtype">int</span> tempId[6] = {0};</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    status = <a class="code" href="group__device__status.html#ga15580d1b8aa426a15915fb030518f8d4">OmCommand</a>(deviceId, <span class="stringliteral">&quot;\r\nSTATUS 7\r\n&quot;</span>, response, 255, <span class="stringliteral">&quot;NANDID=&quot;</span>, 2000, parts, 15);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__return__codes.html#gaa07db56ead2f479f7f397f70fadd675d">OM_FAILED</a>(status)) <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// &quot;NANDID=0&quot;</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span> (parts[1] == NULL) { <span class="keywordflow">return</span> <a class="code" href="group__return__codes.html#ga0ab836743057844f6170feb835565c0f">OM_E_UNEXPECTED_RESPONSE</a>; }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (sscanf(parts[1], <span class="stringliteral">&quot;%x:%x:%x:%x:%x:%x&quot;</span>, &amp;tempId[0], &amp;tempId[1], &amp;tempId[2], &amp;tempId[3], &amp;tempId[4], &amp;tempId[5]) != 6) { <span class="keywordflow">return</span> <a class="code" href="group__return__codes.html#ga0ab836743057844f6170feb835565c0f">OM_E_UNEXPECTED_RESPONSE</a>; }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 6; i++) { localId[i] = (<span class="keywordtype">unsigned</span> char)tempId[i]; }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> != NULL) { memcpy(<span class="keywordtype">id</span>, localId, 6); }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (identified != NULL) </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        *identified = -2;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span> (memcmp(NAND_DEVICE_HY27UF084G2B, (<span class="keywordtype">char</span> *)localId, 6) == 0)        { *identified = 1; }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (memcmp(NAND_DEVICE_HY27UF084G2M, (<span class="keywordtype">char</span> *)localId, 6) == 0)   { *identified = 2; }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (memcmp(NAND_DEVICE_MT29F8G08AAA, (<span class="keywordtype">char</span> *)localId, 6) == 0)   { *identified = 3; }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (memcmp(NAND_DEVICE_S34ML04G1, (<span class="keywordtype">char</span> *)localId, 6) == 0)      { *identified = 4; }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (memcmp(NAND_DEVICE_MT29F8G08ABADA, (<span class="keywordtype">char</span> *)localId, 6) == 0) { *identified = 5; }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (parts[2] == NULL) { <span class="keywordflow">return</span> <a class="code" href="group__return__codes.html#ga0ab836743057844f6170feb835565c0f">OM_E_UNEXPECTED_RESPONSE</a>; }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (present != NULL) </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        *present = atoi(parts[2]);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__return__codes.html#ga1f1c58d657a3bab4fd36dfc83eb253a7">OM_OK</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">  154</a></span>&#160;FILE *<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">// Calculate epoch the time in seconds from a packed time</span></div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="verify_8c.html#a28dd9d5ca8831cc4ddec9b135aba4505">  157</a></span>&#160;time_t <a class="code" href="verify_8c.html#a28dd9d5ca8831cc4ddec9b135aba4505">TimeSerial</a>(<a class="code" href="group__datetime.html#ga5ae96407571b49c6086be47907389dfc">OM_DATETIME</a> timestamp)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    time_t tSec;                            <span class="comment">// Seconds since epoch</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keyword">struct </span>tm tParts = {0};                 <span class="comment">// Time elements (YMDHMS)</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    tParts.tm_year = <a class="code" href="group__datetime.html#ga3889bada708d70fdae157d910771230b">OM_DATETIME_YEAR</a>(timestamp) - 1900;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    tParts.tm_mon = <a class="code" href="group__datetime.html#gaf4d3426bec2f1ac9dbce0965c7f6f7c8">OM_DATETIME_MONTH</a>(timestamp) - 1;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    tParts.tm_mday = <a class="code" href="group__datetime.html#ga09d645a3f7989b65fcc9e9c045c8798a">OM_DATETIME_DAY</a>(timestamp);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    tParts.tm_hour = <a class="code" href="group__datetime.html#gae5d26861be6dc34e6f369496a8f87252">OM_DATETIME_HOURS</a>(timestamp);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    tParts.tm_min = <a class="code" href="group__datetime.html#ga6fd03816bcc340df126d7e77f02a7233">OM_DATETIME_MINUTES</a>(timestamp);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    tParts.tm_sec = <a class="code" href="group__datetime.html#gaf89fa3e164311c43b62cf12297a38dbd">OM_DATETIME_SECONDS</a>(timestamp);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    tSec = timegm(&amp;tParts);                 <span class="comment">// Pack from YMDHMS</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span> tSec;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">// Calculate the time in 1/65536th seconds from a packed time</span></div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="verify_8c.html#ae705da34ceec812b223d4777b6b5088d">  173</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="verify_8c.html#ae705da34ceec812b223d4777b6b5088d">Ticks</a>(<a class="code" href="group__datetime.html#ga5ae96407571b49c6086be47907389dfc">OM_DATETIME</a> timestamp, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> fractional)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    time_t tSec = <a class="code" href="verify_8c.html#a28dd9d5ca8831cc4ddec9b135aba4505">TimeSerial</a>(timestamp);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> ((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)tSec &lt;&lt; 16) + fractional;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">// Returns the number of milliseconds since the epoch</span></div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="verify_8c.html#a2e7553abf9018c08271485321b610a54">  180</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="verify_8c.html#a2e7553abf9018c08271485321b610a54">now</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">struct </span>timeb tp;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    ftime(&amp;tp);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)tp.time * 1000 + tp.millitm;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">// Returns a formatted date/time string for the specific number of milliseconds since the epoch</span></div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="verify_8c.html#a7cbda1e80cfc1808d1046c5f205057af">  188</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="verify_8c.html#a7cbda1e80cfc1808d1046c5f205057af">formattedtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> milliseconds)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> output[] = <span class="stringliteral">&quot;YYYY-MM-DD HH:MM:SS.fff&quot;</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keyword">struct </span>tm *today;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keyword">struct </span>timeb tp = {0};</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    tp.time = (time_t)(milliseconds / 1000);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    tp.millitm = (<span class="keywordtype">unsigned</span> short)(milliseconds % 1000);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    tzset();</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    today = localtime(&amp;(tp.time));</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    sprintf(output, <span class="stringliteral">&quot;%04d-%02d-%02d %02d:%02d:%02d.%03d&quot;</span>, 1900 + today-&gt;tm_year, today-&gt;tm_mon + 1, today-&gt;tm_mday, today-&gt;tm_hour, today-&gt;tm_min, today-&gt;tm_sec, tp.millitm);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> output;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">// Device has gyro?</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> hasGyro(<span class="keywordtype">int</span> deviceId)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;{</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordtype">char</span> serialBuffer[<a class="code" href="group__data__download.html#gacb397cf74823bb9eb81d9efaace027c8">OM_MAX_PATH</a>];</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__return__codes.html#gaa07db56ead2f479f7f397f70fadd675d">OM_FAILED</a>(<a class="code" href="group__device__status.html#gaa37095cecad3d86484511180435ee4cf">OmGetDeviceSerial</a>(deviceId, serialBuffer))) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">return</span> memcmp(serialBuffer, <span class="stringliteral">&quot;AX6&quot;</span>, 3) == 0;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/* Conversion function */</span></div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="verify_8c.html#aa409e158736d8e67857beeeca69cd918">  210</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="verify_8c.html#aa409e158736d8e67857beeeca69cd918">verify_process</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *infile, <a class="code" href="structdownload__t.html">download_t</a> *<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>, <span class="keywordtype">int</span> globalOptions)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordtype">char</span> output = 0;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="group__reader.html#gaa654dad2b5e252a2e9dbce771f50445e">OmReaderHandle</a> reader;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">int</span> batteryStartPercent = 0, batteryEndPercent = 0;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">int</span> batteryMaxPercent = -1, batteryMinPercent = -1;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> veryFirstTime = 0;                   <span class="comment">// First time in file</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> firstTime = 0, lastTime = 0;         <span class="comment">// First &amp; last time in current recording block</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> blockStart = 0;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> previousBlockEnd = 0;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> minLight = 0xffff;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> previousSequenceId = -1;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordtype">int</span> block;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">int</span> day = 0;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> totalSamples = 0;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorFile = 0, errorEvent = 0, errorStuck = 0, errorRange = 0, errorBreaks = 0, errorRate = 0;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordtype">double</span> maxAv = 0.0, peakAv = 0.0;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordtype">char</span> first = 1;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> minInterval = 0, maxInterval = 0;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> lastBlockStart = 0;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> totalDuration = 0;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">float</span> breakTime = 0.0f;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordtype">int</span> firstPacket;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordtype">int</span> lastSecond;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordtype">int</span> restarts = 0;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html">OM_READER_HEADER_PACKET</a> *hp;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordtype">char</span> outOfRange = 0;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordtype">char</span> label[256];</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordtype">char</span> line[768];</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordtype">int</span> retval;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordtype">float</span> percentPerHour = 0;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// old statics</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordtype">short</span> lx = 0, ly = 0, lz = 0, stuck = 0;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordtype">short</span> lgx = 0, lgy = 0, lgz = 0, gstuck = 0;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">char</span> timeString[25];  <span class="comment">/* &quot;YYYY-MM-DD hh:mm:ss.000&quot;; */</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">int</span> seconds, packetCount = 0;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordtype">double</span> av = 0.0;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">int</span> lastHour = -1;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordtype">char</span> description[1024] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (infile == NULL || infile[0] == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;ERROR: File not specified\n&quot;</span>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">return</span> -2;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    fprintf(stderr, <span class="stringliteral">&quot;FILE: %s\n&quot;</span>, infile);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    sprintf(label, infile);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= 0) { sprintf(label, <span class="stringliteral">&quot;%d&quot;</span>, <span class="keywordtype">id</span>); }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">/* Open the binary file reader on the input file */</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    reader = <a class="code" href="group__reader.html#gafe29bdb2bf78d31ae1f75f7bc0ac542d">OmReaderOpen</a>(infile);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (reader == NULL)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;ERROR: Problem opening file: %s\n&quot;</span>, infile);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">/* Iterate over all of the blocks of the file */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    firstPacket = 1;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    lastSecond = -1;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">for</span> (block = 0; ; block++)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html">OM_READER_DATA_PACKET</a> *dp;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> interval;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordtype">int</span> numSamples;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordtype">short</span> *buffer;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="comment">/* Report progress: minute */</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;hasGyro)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">if</span> (block != 0 &amp;&amp; block % 150 == 0) { fprintf(stderr, <span class="stringliteral">&quot;:&quot;</span>); }                       <span class="comment">/* Approx. 1 minute of unpacked accel+gyro */</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <span class="keywordflow">if</span> (block != 0 &amp;&amp; block % 50 == 0) { fprintf(stderr, <span class="stringliteral">&quot;.&quot;</span>); }                        <span class="comment">/* Approx. 1 minute of packed accel */</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="comment">//if (block != 0 &amp;&amp; block %  3000 == 0) { fprintf(stderr, &quot;|\n&quot;); }                 /* Approx. 1 hour */</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="comment">//if (block != 0 &amp;&amp; block % 72000 == 0) { fprintf(stderr, &quot;===\n&quot;); }               /* Approx. 1 day */</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="comment">/* Read the next block */</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        numSamples = <a class="code" href="group__reader.html#ga1f48311f47268ee9532cbe9961bbcf18">OmReaderNextBlock</a>(reader);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="comment">/* Successful end of file */</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">if</span> (numSamples == <a class="code" href="group__return__codes.html#gaa1ec7826762c2fe2c863363e3ac8c550">OM_E_FAIL</a>) { <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="comment">/* Problem reading the file */</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">if</span> (numSamples &lt; 0)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;[ERROR: %d - %s]\n&quot;</span>, numSamples, <a class="code" href="group__return__codes.html#gacf8cd8926d77b109158af0b72f38f166">OmErrorString</a>(numSamples)); </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            errorFile++;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="comment">/* Get the raw packet handle */</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        dp = <a class="code" href="group__reader.html#ga8ab9d544730fc97372a1b9dee3f5409e">OmReaderRawDataPacket</a>(reader);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="comment">/* Block has no valid data */</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">if</span> (numSamples == 0)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;[WARNING: Missing packet -- probably checksum failed? At block %d, sector %d?]\n&quot;</span>, block, block+3); </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            errorFile++;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="comment">/* Check the raw packet handle */</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span> (dp == NULL)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;[ERROR: Cannot get raw data packet]\n&quot;</span>); </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            errorFile++;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="comment">/* Check events mask */</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html#a6afb9ac2ccc07c1c5c4adb0ba40fe303">events</a> &amp; 0xf0)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;[EVENT-ERROR: 0x%02x]\n&quot;</span>, dp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html#a6afb9ac2ccc07c1c5c4adb0ba40fe303">events</a>); </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            errorEvent++;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="comment">// Read the block start time</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timestamp;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> fractional;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            timestamp = <a class="code" href="group__reader.html#gab8ee286a10180901a40d65647c2735e5">OmReaderTimestamp</a>(reader, 0, &amp;fractional);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            blockStart = <a class="code" href="verify_8c.html#ae705da34ceec812b223d4777b6b5088d">Ticks</a>(timestamp, fractional);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> light = <a class="code" href="group__reader.html#ga46fddf401761dff1fd0976daf55c5df9">OmReaderGetValue</a>(reader, <a class="code" href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aad9b82ee2308aed3bac11bc14ad228386">OM_VALUE_LIGHT</a>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="keywordflow">if</span> (light &lt; minLight) { minLight = light; }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">        fprintf(stderr, &quot;\n[timestampOffset %04d-%02d-%02d %02d:%02d:%02d %+d * %.3f]&quot;, </span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">            OM_DATETIME_YEAR(timestamp), OM_DATETIME_MONTH(timestamp), OM_DATETIME_DAY(timestamp),</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">            OM_DATETIME_HOURS(timestamp), OM_DATETIME_MINUTES(timestamp), OM_DATETIME_SECONDS(timestamp),</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">            -timestampOffset, 1.0f / sampleRate);</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">            */</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="comment">// If we read a block out-of-sequence</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">if</span> (previousSequenceId != (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)-1 &amp;&amp; previousSequenceId + 1 != dp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html#a265f19061707d45f04e154c7a8fc1334">sequenceId</a>)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html#a265f19061707d45f04e154c7a8fc1334">sequenceId</a> != 0)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;WARNING: Sequence break %u -&gt; %u\n&quot;</span>, previousSequenceId, dp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html#a265f19061707d45f04e154c7a8fc1334">sequenceId</a>);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordtype">long</span> <span class="keywordtype">long</span> recordingLength = (<span class="keywordtype">long</span> long)(lastTime - firstTime);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="keywordtype">long</span> <span class="keywordtype">long</span> diff = (<span class="keywordtype">long</span> long)(blockStart - previousBlockEnd);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">#ifdef IGNORE_RECENT_RESTARTS</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                time_t allowed = time(NULL) - <a class="code" href="verify_8c.html#a7db2d12bf20b1347de3f6b65bf8e3a47">IGNORE_RECENT_RESTARTS</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                <span class="keyword">struct </span>tm *tm = localtime(&amp;allowed);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                <a class="code" href="group__datetime.html#ga5ae96407571b49c6086be47907389dfc">OM_DATETIME</a> allowedRestartTime = <a class="code" href="group__datetime.html#ga9425fb8aff47067802c577dd84bda413">OM_DATETIME_FROM_YMDHMS</a>(tm-&gt;tm_year + 1900, tm-&gt;tm_mon + 1, tm-&gt;tm_mday, tm-&gt;tm_hour, tm-&gt;tm_min, tm-&gt;tm_sec);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html#afe14e1641374ab41d47dd230114c1a93">timestamp</a> &gt;= allowedRestartTime)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    <span class="comment">// Recalculate allowed restart time</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;NOTE: Permitted recording sequence restarted @%u, length of %+.2fs (gap of %+.2fs)\n&quot;</span>, previousSequenceId, (<span class="keywordtype">float</span>)recordingLength / 65536.0f, (<span class="keywordtype">float</span>)diff / 65536.0f);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;NOTE: Recording sequence restarted @%u, length of %+.2fs (gap of %+.2fs)\n&quot;</span>, previousSequenceId, (<span class="keywordtype">float</span>)recordingLength / 65536.0f, (<span class="keywordtype">float</span>)diff / 65536.0f);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    restarts++;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    breakTime += (float)diff / 65536.0f;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                totalDuration += recordingLength;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                lastBlockStart = 0;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                firstPacket = 1;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                lastSecond = -1;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                firstTime = 0;           <span class="comment">// Start of a new block</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">if</span> (firstTime == 0)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            firstTime = blockStart;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keywordflow">if</span> (veryFirstTime == 0) { veryFirstTime = firstTime; }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            lastTime = firstTime;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            batteryStartPercent = <a class="code" href="group__reader.html#ga46fddf401761dff1fd0976daf55c5df9">OmReaderGetValue</a>(reader, OM_VALUE_BATTERY_PERCENT);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            batteryEndPercent = batteryStartPercent;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="keywordflow">if</span> (batteryMaxPercent &lt; 0) { batteryMaxPercent = batteryStartPercent; }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">if</span> (batteryMinPercent &lt; 0) { batteryMinPercent = batteryStartPercent; }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span> (lastBlockStart &gt; 0)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="comment">// Interval</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            interval = blockStart - lastBlockStart;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <span class="comment">// If the previous block&#39;s &quot;blockEnd&quot; is not close (+- 5%) to this block&#39;s &quot;blockStart&quot;, we have a time discontinuity</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">if</span> (previousBlockEnd != 0 &amp;&amp; blockStart != 0 &amp;&amp; abs((<span class="keywordtype">int</span>)(previousBlockEnd - blockStart)) &gt;= 8000)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <span class="keywordtype">long</span> <span class="keywordtype">long</span> diff = (<span class="keywordtype">long</span> long)(blockStart - previousBlockEnd);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;WARNING: Time break in sequence by %+.2f seconds (last: %f, curr: %f)\n&quot;</span>, (<span class="keywordtype">float</span>)diff / 65536.0f, lastBlockStart / 65536.0f, blockStart / 65536.0f);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                breakTime += (float)diff / 65536.0f;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="comment">// Min/max interval</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                <span class="keywordflow">if</span> (first) { first = 0; minInterval = interval; maxInterval = interval; }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <span class="keywordflow">if</span> (interval &gt; maxInterval) { maxInterval = interval; }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <span class="keywordflow">if</span> (interval &lt; minInterval) { minInterval = interval; }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        lastBlockStart = blockStart;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordtype">int</span> numAxes = <a class="code" href="group__reader.html#ga46fddf401761dff1fd0976daf55c5df9">OmReaderGetValue</a>(reader, <a class="code" href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aa84d5f7c960867b1f97ab0e42eb2abcd7">OM_VALUE_AXES</a>);              <span class="comment">// Synchronous axes are [GxGyGz]AxAyAz[[MxMyMz]], 3=A, 6=GA, 9=GAM</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordtype">int</span> scaleAccel = <a class="code" href="group__reader.html#ga46fddf401761dff1fd0976daf55c5df9">OmReaderGetValue</a>(reader, <a class="code" href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aae11e81ec3dbf78a362bf347e3b2bbc60">OM_VALUE_SCALE_ACCEL</a>);    <span class="comment">// Scaling: number of units for 1g: CWA=256, AX6=2048 (+/-16g), 4096 (+/-8g), 8192 (+/-4g), 16384 (+/-2g)</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordtype">int</span> scaleGyro = <a class="code" href="group__reader.html#ga46fddf401761dff1fd0976daf55c5df9">OmReaderGetValue</a>(reader, <a class="code" href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aadccdc8d7033943b79f62dfcb226c7d74">OM_VALUE_SCALE_GYRO</a>);      <span class="comment">// Scaling: number of degrees per second that (2^15=)32768 represents: AX6= 2000, 1000, 500, 250, 125, 0=off.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordtype">int</span> axisAccel = <a class="code" href="group__reader.html#ga46fddf401761dff1fd0976daf55c5df9">OmReaderGetValue</a>(reader, <a class="code" href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aa9b1e8a3924e1cd67c2bb0ec41419d438">OM_VALUE_ACCEL_AXIS</a>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordtype">int</span> axisGyro = <a class="code" href="group__reader.html#ga46fddf401761dff1fd0976daf55c5df9">OmReaderGetValue</a>(reader, <a class="code" href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aaf80d7147f8a2cc700c5467aed38cfd46">OM_VALUE_GYRO_AXIS</a>);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rateCode = <a class="code" href="group__reader.html#ga46fddf401761dff1fd0976daf55c5df9">OmReaderGetValue</a>(reader, OM_VALUE_SAMPLERATE);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rate = (3200 / (1 &lt;&lt; (15 - (rateCode &amp; 0x0f))));</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordtype">int</span> minPacketCount = rate - (12 * rate / 100);  <span class="comment">// -12%</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordtype">int</span> maxPacketCount = rate + (12 * rate / 100);  <span class="comment">// +12%</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        buffer = <a class="code" href="group__reader.html#ga68ef443d4bad40afb7f52bc9f5bb0f71">OmReaderBuffer</a>(reader);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; numSamples; i++)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <a class="code" href="group__datetime.html#ga5ae96407571b49c6086be47907389dfc">OM_DATETIME</a> dateTime;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> fractional;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="keywordtype">short</span> x, y, z;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="keywordtype">double</span> v;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            totalSamples++;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="comment">/* Get the date/time value for this sample, and the 1/65536th fractions of a second */</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            dateTime = <a class="code" href="group__reader.html#gab8ee286a10180901a40d65647c2735e5">OmReaderTimestamp</a>(reader, i, &amp;fractional);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            sprintf(timeString, <span class="stringliteral">&quot;%04d-%02d-%02d %02d:%02d:%02d.%03d&quot;</span>, </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    <a class="code" href="group__datetime.html#ga3889bada708d70fdae157d910771230b">OM_DATETIME_YEAR</a>(dateTime), <a class="code" href="group__datetime.html#gaf4d3426bec2f1ac9dbce0965c7f6f7c8">OM_DATETIME_MONTH</a>(dateTime), <a class="code" href="group__datetime.html#ga09d645a3f7989b65fcc9e9c045c8798a">OM_DATETIME_DAY</a>(dateTime), </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                    <a class="code" href="group__datetime.html#gae5d26861be6dc34e6f369496a8f87252">OM_DATETIME_HOURS</a>(dateTime), <a class="code" href="group__datetime.html#ga6fd03816bcc340df126d7e77f02a7233">OM_DATETIME_MINUTES</a>(dateTime), <a class="code" href="group__datetime.html#gaf89fa3e164311c43b62cf12297a38dbd">OM_DATETIME_SECONDS</a>(dateTime), </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                    (<span class="keywordtype">int</span>)fractional * 1000 / 0xffff);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="comment">/* Get the accel x/y/z/ values */</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            x = buffer[numAxes * i + axisAccel + 0];</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            y = buffer[numAxes * i + axisAccel + 1];</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            z = buffer[numAxes * i + axisAccel + 2];</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="comment">/* Get the accel x/y/z/ values */</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordtype">short</span> gx = 0, gy = 0, gz = 0;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordtype">bool</span> hasGyro = (axisGyro &gt;= 0);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">if</span> (hasGyro)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                gx = buffer[numAxes * i + axisGyro + 0];</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                gy = buffer[numAxes * i + axisGyro + 1];</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                gz = buffer[numAxes * i + axisGyro + 2];</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;hasGyro = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="comment">/* Detect stuck values */</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="keywordflow">if</span> (x == lx &amp;&amp; y == ly &amp;&amp; z == lz)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                stuck++;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                <span class="keywordflow">if</span> (stuck == <a class="code" href="verify_8c.html#a080ac2194de86d8acfc23706d1c7d9de">STUCK_COUNT</a>)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;\nERROR: Readings could be stuck at (%d, %d, %d); has been for %d consecutive readings. &quot;</span>, lx, ly, lz, stuck);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                    errorStuck++;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                <span class="keywordflow">if</span> (stuck &gt;= <a class="code" href="verify_8c.html#a080ac2194de86d8acfc23706d1c7d9de">STUCK_COUNT</a>)</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;\nNOTE: Readings now changed -- were at (%d, %d, %d) for total of %d consecutive readings. &quot;</span>, lx, ly, lz, stuck);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                lx = x; ly = y; lz = z;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                stuck = 0;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="comment">/* Detect gyro stuck values */</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordflow">if</span> (hasGyro)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <span class="keywordflow">if</span> (gx == lgx &amp;&amp; gy == lgy &amp;&amp; gz == lgz)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                    gstuck++;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                    <span class="keywordflow">if</span> (gstuck == <a class="code" href="verify_8c.html#a080ac2194de86d8acfc23706d1c7d9de">STUCK_COUNT</a>)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                    {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;\nERROR: Gyro readings could be stuck at (%d, %d, %d); has been for %d consecutive readings. &quot;</span>, lgx, lgy, lgz, gstuck);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                        errorStuck++;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                    <span class="keywordflow">if</span> (stuck &gt;= <a class="code" href="verify_8c.html#a080ac2194de86d8acfc23706d1c7d9de">STUCK_COUNT</a>)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                    {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;\nNOTE: Gyro readings now changed -- were at (%d, %d, %d) for total of %d consecutive readings. &quot;</span>, lgx, lgy, lgz, gstuck);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                    lgx = gx; lgy = gy; lgz = gz;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                    gstuck = 0;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="comment">/* Get the SVM - 1 */</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            v = sqrt((x / (<span class="keywordtype">double</span>)scaleAccel) * (x / (<span class="keywordtype">double</span>)scaleAccel) + (y / (<span class="keywordtype">double</span>)scaleAccel) * (y / (<span class="keywordtype">double</span>)scaleAccel) + (z / (<span class="keywordtype">double</span>)scaleAccel) * (z / (<span class="keywordtype">double</span>)scaleAccel)) - 1.0;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            av = ((1.0 - <a class="code" href="verify_8c.html#a489b573f8657cc4a892f86b80c1aa608">AVERAGE_FACTOR</a>) * av) + (<a class="code" href="verify_8c.html#a489b573f8657cc4a892f86b80c1aa608">AVERAGE_FACTOR</a> * v);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">if</span> (fabs(av) &gt; peakAv) { peakAv = fabs(av); }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="keywordflow">if</span> (fabs(av) &gt; maxAv) { maxAv = fabs(av); }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <span class="keywordflow">if</span> (fabs(av) &gt; <a class="code" href="verify_8c.html#a487b6057583dc10b18e976efacbe9edd">AVERAGE_RANGE_MAX</a>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                <span class="keywordflow">if</span> (!outOfRange)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    errorRange++;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                    outOfRange = 1;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                    peakAv = fabs(av);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;WARNING: Average SVM gone out-of-normal-range abs(avg(svm-1)): %0.3f\n&quot;</span>, fabs(av));</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            } </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fabs(av) &lt; <a class="code" href="verify_8c.html#ac5b01ce406ab803b55eb603ed5416aff">AVERAGE_RANGE_OFF</a> &amp;&amp; outOfRange) </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            { </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                outOfRange = 0; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;WARNING: Average SVM back in normal range, peak was abs(avg(svm-1)): %0.3f\n&quot;</span>, peakAv);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="comment">/* Output the data */</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">//            if (output) { fprintf(stdout, &quot;%s,%d,%d,%d\n&quot;, timeString, x, y, z); }</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                <span class="keywordtype">int</span> hour = <a class="code" href="group__datetime.html#gae5d26861be6dc34e6f369496a8f87252">OM_DATETIME_HOURS</a>(dateTime);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                <span class="keywordflow">if</span> (hour != lastHour)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;\n%02d-%02d %02d:%02d:%02d.%02d&quot;</span>, <span class="comment">/*OM_DATETIME_YEAR(dateTime) % 100, */</span> <a class="code" href="group__datetime.html#gaf4d3426bec2f1ac9dbce0965c7f6f7c8">OM_DATETIME_MONTH</a>(dateTime), <a class="code" href="group__datetime.html#ga09d645a3f7989b65fcc9e9c045c8798a">OM_DATETIME_DAY</a>(dateTime), <a class="code" href="group__datetime.html#gae5d26861be6dc34e6f369496a8f87252">OM_DATETIME_HOURS</a>(dateTime), <a class="code" href="group__datetime.html#ga6fd03816bcc340df126d7e77f02a7233">OM_DATETIME_MINUTES</a>(dateTime), <a class="code" href="group__datetime.html#gaf89fa3e164311c43b62cf12297a38dbd">OM_DATETIME_SECONDS</a>(dateTime), (<span class="keywordtype">int</span>)fractional * 100 / 0xffff);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                    lastHour = hour;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            seconds = <a class="code" href="group__datetime.html#gaf89fa3e164311c43b62cf12297a38dbd">OM_DATETIME_SECONDS</a>(dateTime);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordflow">if</span> (lastSecond == -1) { lastSecond = seconds; };</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            <span class="keywordflow">if</span> (seconds != lastSecond)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                <span class="keywordflow">if</span> (firstPacket) { <span class="comment">/* fprintf(stderr, &quot;!&quot;); */</span> firstPacket = 0; }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (packetCount &gt;= minPacketCount &amp;&amp; packetCount &lt;= maxPacketCount) { <span class="comment">/* fprintf(stderr, &quot;#&quot;); */</span> }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                { </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    <span class="keywordflow">if</span> (seconds == lastSecond + 1 || (seconds == 0 &amp;&amp; lastSecond == 59))</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                    {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                        errorRate++;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;WARNING: &#39;Out of range&#39; %d samples in second :%02d before %s]\n&quot;</span>, packetCount, lastSecond, timeString);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                    {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                        errorBreaks++;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;WARNING: Non-sequential second jump (%d samples in second :%02d before %s)]\n&quot;</span>, packetCount, lastSecond, timeString);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                lastSecond = seconds;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                packetCount = 0;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            packetCount++;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="comment">// Store the current sequence id</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        previousSequenceId = dp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html#a265f19061707d45f04e154c7a8fc1334">sequenceId</a>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="comment">// Read the block end time</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timestamp;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> fractional;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            timestamp = <a class="code" href="group__reader.html#gab8ee286a10180901a40d65647c2735e5">OmReaderTimestamp</a>(reader, numSamples, &amp;fractional);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            previousBlockEnd = <a class="code" href="verify_8c.html#ae705da34ceec812b223d4777b6b5088d">Ticks</a>(timestamp, fractional);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        lastTime = previousBlockEnd;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        batteryEndPercent = <a class="code" href="group__reader.html#ga46fddf401761dff1fd0976daf55c5df9">OmReaderGetValue</a>(reader, OM_VALUE_BATTERY_PERCENT);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">if</span> (batteryEndPercent &gt; batteryMaxPercent) { batteryMaxPercent = batteryEndPercent; }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">if</span> (batteryEndPercent &lt; batteryMinPercent) { batteryMinPercent = batteryEndPercent; }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment">/* Last session&#39;s duration */</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordtype">long</span> <span class="keywordtype">long</span> recordingLength = (<span class="keywordtype">long</span> long)(lastTime - firstTime);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        totalDuration += recordingLength;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">/* Summary */</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordtype">int</span> startStopFail = 0;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        hp = <a class="code" href="group__reader.html#ga616368cf0b2303d56d7c1406e7aaff47">OmReaderRawHeaderPacket</a>(reader);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">if</span> (hp == NULL)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;ERROR: Unable to access file header for start/stop times.\n&quot;</span>);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            startStopFail += 4;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <span class="keywordflow">if</span> (hp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a1f49c52e8909c794bc93f53e65db0b34">loggingStartTime</a> &gt;= <a class="code" href="group__datetime.html#ga8316c5d8a510e084722b53694cb804a7">OM_DATETIME_MIN_VALID</a> &amp;&amp; hp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a1f49c52e8909c794bc93f53e65db0b34">loggingStartTime</a> &lt;= <a class="code" href="group__datetime.html#ga48430ffa6f1834e1e2f148edf1c2d4de">OM_DATETIME_MAX_VALID</a> &amp;&amp; hp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a071d790190e81b84380c397dabe0a2aa">loggingEndTime</a> &gt; hp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a1f49c52e8909c794bc93f53e65db0b34">loggingStartTime</a>)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> fStart = (<span class="keywordtype">unsigned</span> long)<a class="code" href="verify_8c.html#a28dd9d5ca8831cc4ddec9b135aba4505">TimeSerial</a>(hp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a1f49c52e8909c794bc93f53e65db0b34">loggingStartTime</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> aStart = (<span class="keywordtype">unsigned</span> long)(veryFirstTime &gt;&gt; 16);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                <span class="keywordtype">int</span> startDiff = (int)(aStart - fStart);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                <span class="keywordflow">if</span> (abs(startDiff) &lt; 80)</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                { </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;NOTE: Data started near recording start time (%ds).\n&quot;</span>, startDiff);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;ERROR: Data did not start near recording start time (%ds).\n&quot;</span>, startDiff);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                    startStopFail += 2;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;NOTE: Recording has no start time (not verifying).\n&quot;</span>);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="keywordflow">if</span> (hp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a071d790190e81b84380c397dabe0a2aa">loggingEndTime</a> &gt;= <a class="code" href="group__datetime.html#ga8316c5d8a510e084722b53694cb804a7">OM_DATETIME_MIN_VALID</a> &amp;&amp; hp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a071d790190e81b84380c397dabe0a2aa">loggingEndTime</a> &lt;= <a class="code" href="group__datetime.html#ga48430ffa6f1834e1e2f148edf1c2d4de">OM_DATETIME_MAX_VALID</a> &amp;&amp; hp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a1f49c52e8909c794bc93f53e65db0b34">loggingStartTime</a> &lt; hp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a071d790190e81b84380c397dabe0a2aa">loggingEndTime</a>)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> fEnd = (<span class="keywordtype">unsigned</span> long)<a class="code" href="verify_8c.html#a28dd9d5ca8831cc4ddec9b135aba4505">TimeSerial</a>(hp-&gt;<a class="code" href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a071d790190e81b84380c397dabe0a2aa">loggingEndTime</a>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> aEnd = (<span class="keywordtype">unsigned</span> long)(lastTime &gt;&gt; 16);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                <span class="keywordtype">int</span> stopDiff = (int)(aEnd - fEnd);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="keywordflow">if</span> (globalOptions &amp; <a class="code" href="verify_8c.html#a7effaa29b4ebb804cf0890c15ec32508">VERIFY_OPTION_NO_CHECK_STOP</a>)</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;NOTE: Ignoring whether data stopped near recording stop time (difference was %ds).\n&quot;</span>, stopDiff);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (abs(stopDiff) &lt; 80)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                { </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;NOTE: Data stopped near recording stop time (%ds).\n&quot;</span>, stopDiff);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;ERROR: Data did not stop near recording stop time (%ds).\n&quot;</span>, stopDiff);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    startStopFail += 1;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;NOTE: Recording has no stop time (not verifying).\n&quot;</span>);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">// Error mask</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="preprocessor">#define CODE_ERROR_MASK         0xfffff000</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="preprocessor">#define CODE_WARNING_MASK       0x00000fff</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">// FILE - Read file issue (sector incorrect or checksum mismatch)</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="preprocessor">#define CODE_WARNING_FILE       0x000001</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="preprocessor">#define CODE_ERROR_FILE         0x001000</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">// EVENT - System logged event error (e.g. FIFO overflow)</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="preprocessor">#define CODE_WARNING_EVENT      0x000002</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="preprocessor">#define CODE_ERROR_EVENT        0x002000</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">// STUCK - Where the accelerometer appears to be stuck at the same value </span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="preprocessor">#define CODE_WARNING_STUCK      0x000004</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="preprocessor">#define CODE_ERROR_STUCK        0x004000</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">// RANGE - Where the accelerometer doesn&#39;t seem to average to 1G</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="preprocessor">#define CODE_WARNING_RANGE      0x000008</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="preprocessor">#define CODE_ERROR_RANGE        0x008000</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">// RATE - Where the rate is too far off 100Hz</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="preprocessor">#define CODE_WARNING_RATE       0x000010</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="preprocessor">#define CODE_ERROR_RATE         0x010000</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">// BREAKS - Where there is a gap in the data</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="preprocessor">#define CODE_WARNING_BREAKS     0x000020</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="preprocessor">#define CODE_ERROR_BREAKS       0x020000</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">// RESTARTS - Where the device has restarted</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="preprocessor">#define CODE_WARNING_RESTARTS   0x000040</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="preprocessor">#define CODE_ERROR_RESTARTS     0x040000</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">// LIGHT - Where the light level reading is far lower than normal (seems to indicate a failure)</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="preprocessor">#define CODE_WARNING_LIGHT      0x000080</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="preprocessor">#define CODE_ERROR_LIGHT        0x080000</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">// BATT - Where the battery discharge is more rapid than usual</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="preprocessor">#define CODE_WARNING_BATT       0x000100</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="preprocessor">#define CODE_ERROR_BATT         0x100000</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">// STARTSTOP - Where the configured start/stop times are not met</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="preprocessor">#define CODE_WARNING_STARTSTOP  0x000200</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="preprocessor">#define CODE_ERROR_STARTSTOP    0x200000</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">// NANDHEALTH - Where the number of reported spare blocks are low</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="preprocessor">#define CODE_WARNING_NANDHEALTH 0x000400</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="preprocessor">#define CODE_ERROR_NANDHEALTH   0x400000</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">// NANDID - Where the NAND id is unexpected</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="preprocessor">#define CODE_WARNING_NANDID     0x000800</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="preprocessor">#define CODE_ERROR_NANDID       0x800000</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;retval = 0;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="keywordflow">if</span> (errorFile   &gt; 0)  { retval |= <a class="code" href="verify_8c.html#ae2df1666d95c8020844a9d9817b25a9c">CODE_ERROR_FILE</a>; }     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errorFile &gt; 0)   { retval |= <a class="code" href="verify_8c.html#aefacc2c4c7de009175063549b07f27aa">CODE_WARNING_FILE</a>; }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="keywordflow">if</span> (errorEvent  &gt; 0)  { retval |= <a class="code" href="verify_8c.html#ab47f01a45c9f99599b41d7f615a9a4b5">CODE_ERROR_EVENT</a>; }    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errorEvent &gt; 0)  { retval |= <a class="code" href="verify_8c.html#ad7545697ae629cfeeecc86e8c68ade6e">CODE_WARNING_EVENT</a>; }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="keywordflow">if</span> (errorStuck  &gt; 0)  { retval |= <a class="code" href="verify_8c.html#aaf94d307f92dbc5c2c619265b6935b30">CODE_ERROR_STUCK</a>; }    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errorStuck &gt; 0)  { retval |= <a class="code" href="verify_8c.html#a3a7d022453c48aa45f51161cdf30f52c">CODE_WARNING_STUCK</a>; }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="keywordflow">if</span> (errorRange  &gt; 0)  { retval |= <a class="code" href="verify_8c.html#ab7645c49db407c0e2f00d2b7cba16113">CODE_ERROR_RANGE</a>; }    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errorRange &gt; 0)  { retval |= <a class="code" href="verify_8c.html#ae59158a0d7601af531c36084d3305e0e">CODE_WARNING_RANGE</a>; }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="keywordflow">if</span> (errorRate   &gt; 0)  { retval |= <a class="code" href="verify_8c.html#af4688e72bd785bc4a67b09a13140140e">CODE_ERROR_RATE</a>; }     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errorRate &gt; 0)   { retval |= <a class="code" href="verify_8c.html#a6a47fe8bb868cbdbb78ae0240a7ee883">CODE_WARNING_RATE</a>; }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="keywordflow">if</span> (errorBreaks &gt; 0)  { retval |= <a class="code" href="verify_8c.html#aa4dbbc541c7d943b0c0ae7cbd7f48de8">CODE_ERROR_BREAKS</a>; }   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errorBreaks &gt; 0) { retval |= <a class="code" href="verify_8c.html#a6fcfbb45530c486fb628e6b16607adc0">CODE_WARNING_BREAKS</a>; }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="keywordflow">if</span> (restarts    &gt; globalAllowedRestarts) { retval |= <a class="code" href="verify_8c.html#abc179cadee021dc6ca05b84fac044dab">CODE_ERROR_RESTARTS</a>; } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (restarts &gt; 0) { retval |= <a class="code" href="verify_8c.html#acb7fecf71678c05a6d44f6d2bbaeb806">CODE_WARNING_RESTARTS</a>; }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="keywordflow">if</span> (!<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;hasGyro)</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;{</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">// Only use light level on original AX3</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">if</span> (minLight &lt; 90) { retval |= <a class="code" href="verify_8c.html#adfef4e7f048bfe602397574beae607a1">CODE_ERROR_LIGHT</a>; } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (minLight &lt; 140) { retval |= <a class="code" href="verify_8c.html#aa0a4352c636f3aa6f63296673baaf4c4">CODE_WARNING_LIGHT</a>; }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">// Discharge</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;{</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordtype">float</span> hours = ((totalDuration &gt;&gt; 16) / 60.0f / 60.0f);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordtype">float</span> percentLoss = (float)batteryMaxPercent - batteryMinPercent;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    percentPerHour = 0;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">if</span> (hours &gt; 0) { percentPerHour = percentLoss / hours; } <span class="keywordflow">else</span> { percentPerHour = 0; }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;hasGyro)</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="comment">// at least 7-days: 0.595%; at least 8-days: 0.521%</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span> (percentPerHour &gt;= 0.595f) { retval |= <a class="code" href="verify_8c.html#a8de45c9a7fed122dc2296f51879386bf">CODE_ERROR_BATT</a>; } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (percentPerHour &gt;= 0.521f) { retval |= <a class="code" href="verify_8c.html#aec12350823454626adff6683e1a6c1ba">CODE_WARNING_BATT</a>; } <span class="comment">// Gyro levels</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="keywordflow">if</span> (percentPerHour &gt;= 0.29f) { retval |= <a class="code" href="verify_8c.html#a8de45c9a7fed122dc2296f51879386bf">CODE_ERROR_BATT</a>; } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (percentPerHour &gt;= 0.25f) { retval |= <a class="code" href="verify_8c.html#aec12350823454626adff6683e1a6c1ba">CODE_WARNING_BATT</a>; } <span class="comment">// Accel-only levels</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;}</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">// Start/stop</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="keywordflow">if</span> (startStopFail) { retval |= <a class="code" href="verify_8c.html#a33d2d34a79c2596bfa9c33f6e54cb6bf">CODE_ERROR_STARTSTOP</a>; } </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;---\n&quot;</span>);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Input file,%d,\&quot;%s\&quot;,%d\n&quot;</span>, <span class="keywordtype">id</span>, infile, retval);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Summary errors: file=%d, event=%d, stuck=%d, range=%d, rate=%d, breaks=%d\n&quot;</span>, errorFile, errorEvent, errorStuck, errorRange, errorRate, errorBreaks);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Summary info-1: restart=%d, breakTime=%0.1fs, maxAv=%f\n&quot;</span>, restarts, breakTime, maxAv);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Summary info-2: minInterval=%0.3f, maxInterval=%0.3f, duration=%0.4fh\n&quot;</span>, minInterval / 65536.0f, maxInterval / 65536.0f, ((totalDuration &gt;&gt; 16) / 60.0f / 60.0f));</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Summary info-3: minLight=%d, Bmax=%d%%, Bmin=%d%%, intervalFail=%d\n&quot;</span>, minLight, batteryMaxPercent, batteryMinPercent, startStopFail);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="keywordflow">if</span> (<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a> != NULL)</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;{</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="comment">// Spare blocks</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;memoryHealth &lt; 0) { ; }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;memoryHealth &lt; <a class="code" href="group__device__status.html#ga38d39fc1b239750481a9e1d1e09d3d3a">OM_MEMORY_HEALTH_ERROR</a>)        { retval |= <a class="code" href="verify_8c.html#a49f37a4370cde955d01eeae6e789c6e2">CODE_ERROR_NANDHEALTH</a>; }    <span class="comment">// ERROR: No spare blocks</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;memoryHealth &lt; <a class="code" href="group__device__status.html#ga2e73da291028470f0afeb4ad971789f2">OM_MEMORY_HEALTH_WARNING</a>) { retval |= <a class="code" href="verify_8c.html#a5bd9dd6e4cf3c90a14c2553d25d1a316">CODE_WARNING_NANDHEALTH</a>; }  <span class="comment">// WARNING: Very few spare blocks</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="preprocessor">#ifdef ID_NAND</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// NAND ID</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;nandType &lt; 0) { ; }                                                 <span class="comment">// Firmware doesn&#39;t support nand Id</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;nandType &lt; 1) { retval |= <a class="code" href="verify_8c.html#a66a9c8e6289ed5bccdcc6ceb378c0155">CODE_ERROR_NANDID</a>; }   <span class="comment">// ERROR: Not primary or secondary type</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="comment">//else if (download-&gt;nandType != 1) { retval |= CODE_WARNING_NANDID; }                            // WARNING: Not primary type</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    fprintf(stderr, <span class="stringliteral">&quot;NAND #%d (%d spare)\n&quot;</span>, <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;nandType, <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;memoryHealth);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;---\n&quot;</span>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="preprocessor">#define HEADER        &quot;VERIFY,&quot; &quot;id,&quot;  &quot;summary,&quot;  &quot;file,&quot;    &quot;event,&quot;    &quot;stuck,&quot;    &quot;range,&quot;    &quot;rate,&quot;    &quot;breaks,&quot;    &quot;restarts,&quot; &quot;breakTime,&quot; &quot;maxAv,&quot;    &quot;minInterval,&quot;          &quot;maxInterval,&quot;           &quot;duration,&quot;                             &quot;minLight,&quot; &quot;batteryMaxPercent,&quot; &quot;batteryMinPercent,&quot; &quot;intervalFail,&quot; &quot;percentLoss,&quot; &quot;description\n&quot;</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            description[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#aefacc2c4c7de009175063549b07f27aa">CODE_WARNING_FILE</a>      ) { strcat(description, <span class="stringliteral">&quot;W:File;&quot;</span>); }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#ad7545697ae629cfeeecc86e8c68ade6e">CODE_WARNING_EVENT</a>     ) { strcat(description, <span class="stringliteral">&quot;W:Event;&quot;</span>); }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#a3a7d022453c48aa45f51161cdf30f52c">CODE_WARNING_STUCK</a>     ) { strcat(description, <span class="stringliteral">&quot;W:Stuck;&quot;</span>); }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#ae59158a0d7601af531c36084d3305e0e">CODE_WARNING_RANGE</a>     ) { strcat(description, <span class="stringliteral">&quot;W:Range;&quot;</span>); }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#a6a47fe8bb868cbdbb78ae0240a7ee883">CODE_WARNING_RATE</a>      ) { strcat(description, <span class="stringliteral">&quot;W:Rate;&quot;</span>); }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#a6fcfbb45530c486fb628e6b16607adc0">CODE_WARNING_BREAKS</a>    ) { strcat(description, <span class="stringliteral">&quot;W:Breaks;&quot;</span>); }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#acb7fecf71678c05a6d44f6d2bbaeb806">CODE_WARNING_RESTARTS</a>  ) { strcat(description, <span class="stringliteral">&quot;W:Restarts;&quot;</span>); }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#aa0a4352c636f3aa6f63296673baaf4c4">CODE_WARNING_LIGHT</a>     ) { <span class="keywordtype">char</span> temp[32]; sprintf(temp, <span class="stringliteral">&quot;W:Light(%d);&quot;</span>, minLight); strcat(description, temp); }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#aec12350823454626adff6683e1a6c1ba">CODE_WARNING_BATT</a>      ) { <span class="keywordtype">char</span> temp[32]; sprintf(temp, <span class="stringliteral">&quot;W:Batt(%2.2f);&quot;</span>, percentPerHour); strcat(description, temp); }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#a6feec3f725a91f10b280aff58481af2d">CODE_WARNING_STARTSTOP</a> ) { strcat(description, <span class="stringliteral">&quot;W:StartStop;&quot;</span>); }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#a5bd9dd6e4cf3c90a14c2553d25d1a316">CODE_WARNING_NANDHEALTH</a>) { strcat(description, <span class="stringliteral">&quot;W:NandHealth;&quot;</span>); }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#a0942f6e922b80b8632ddb02e2e93d3a7">CODE_WARNING_NANDID</a>    ) { strcat(description, <span class="stringliteral">&quot;W:NandId;&quot;</span>); }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#ae2df1666d95c8020844a9d9817b25a9c">CODE_ERROR_FILE</a>        ) { strcat(description, <span class="stringliteral">&quot;E:File;&quot;</span>); }</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#ab47f01a45c9f99599b41d7f615a9a4b5">CODE_ERROR_EVENT</a>       ) { strcat(description, <span class="stringliteral">&quot;E:Event;&quot;</span>); }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#aaf94d307f92dbc5c2c619265b6935b30">CODE_ERROR_STUCK</a>       ) { strcat(description, <span class="stringliteral">&quot;E:Stuck;&quot;</span>); }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#ab7645c49db407c0e2f00d2b7cba16113">CODE_ERROR_RANGE</a>       ) { strcat(description, <span class="stringliteral">&quot;E:Range;&quot;</span>); }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#af4688e72bd785bc4a67b09a13140140e">CODE_ERROR_RATE</a>        ) { strcat(description, <span class="stringliteral">&quot;E:Rate;&quot;</span>); }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#aa4dbbc541c7d943b0c0ae7cbd7f48de8">CODE_ERROR_BREAKS</a>      ) { strcat(description, <span class="stringliteral">&quot;E:Breaks;&quot;</span>); }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#abc179cadee021dc6ca05b84fac044dab">CODE_ERROR_RESTARTS</a>    ) { strcat(description, <span class="stringliteral">&quot;E:Restarts;&quot;</span>); }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#adfef4e7f048bfe602397574beae607a1">CODE_ERROR_LIGHT</a>       ) { <span class="keywordtype">char</span> temp[32]; sprintf(temp, <span class="stringliteral">&quot;E:Light(%d);&quot;</span>, minLight); strcat(description, temp); }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#a8de45c9a7fed122dc2296f51879386bf">CODE_ERROR_BATT</a>        ) { <span class="keywordtype">char</span> temp[32]; sprintf(temp, <span class="stringliteral">&quot;E:Batt(%2.2f);&quot;</span>, percentPerHour); strcat(description, temp); }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#a33d2d34a79c2596bfa9c33f6e54cb6bf">CODE_ERROR_STARTSTOP</a>   ) { strcat(description, <span class="stringliteral">&quot;E:StartStop;&quot;</span>); }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#a49f37a4370cde955d01eeae6e789c6e2">CODE_ERROR_NANDHEALTH</a>  ) { strcat(description, <span class="stringliteral">&quot;E:NandHealth;&quot;</span>); }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <span class="keywordflow">if</span> (retval &amp; <a class="code" href="verify_8c.html#a66a9c8e6289ed5bccdcc6ceb378c0155">CODE_ERROR_NANDID</a>      ) { strcat(description, <span class="stringliteral">&quot;E:NandId;&quot;</span>); }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        sprintf(line, <span class="stringliteral">&quot;VERIFYX,&quot;</span> <span class="stringliteral">&quot;%s,&quot;</span>  <span class="stringliteral">&quot;%d,&quot;</span>       <span class="stringliteral">&quot;%d,&quot;</span>      <span class="stringliteral">&quot;%d,&quot;</span>       <span class="stringliteral">&quot;%d,&quot;</span>       <span class="stringliteral">&quot;%d,&quot;</span>       <span class="stringliteral">&quot;%d,&quot;</span>      <span class="stringliteral">&quot;%d,&quot;</span>        <span class="stringliteral">&quot;%d,&quot;</span>       <span class="stringliteral">&quot;%.1f,&quot;</span>      <span class="stringliteral">&quot;%.4f,&quot;</span>     <span class="stringliteral">&quot;%.3f,&quot;</span>                 <span class="stringliteral">&quot;%.3f,&quot;</span>                  <span class="stringliteral">&quot;%.4f,&quot;</span>                                 <span class="stringliteral">&quot;%d,&quot;</span>       <span class="stringliteral">&quot;%d,&quot;</span>                <span class="stringliteral">&quot;%d,&quot;</span>                <span class="stringliteral">&quot;%d,&quot;</span>           <span class="stringliteral">&quot;%f,&quot;</span>          <span class="stringliteral">&quot;%s\n&quot;</span>,</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                                 label, retval,     errorFile, errorEvent, errorStuck, errorRange, errorRate, errorBreaks, restarts,   breakTime,   maxAv,       minInterval / 65536.0f, maxInterval / 65536.0f, ((totalDuration &gt;&gt; 16) / 60.0f / 60.0f), minLight,   batteryMaxPercent,   batteryMinPercent,   startStopFail, percentPerHour, description);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        fprintf(stdout, line);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        fprintf(stderr, line);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a> != NULL)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        { </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <span class="comment">// New output format</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <span class="keywordflow">if</span> (globalOptions &amp; <a class="code" href="verify_8c.html#a416dcd5b28cb1f577ea27df5fa4c0ecb">VERIFY_OPTION_OUTPUT_NEW</a>)</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                <span class="keywordtype">int</span> passed = ((retval &amp; <a class="code" href="verify_8c.html#aae1178706242a620a3ed8a13601ca692">CODE_ERROR_MASK</a>) == 0) ? 1 : 0;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                <span class="comment">// &quot;VERIFY,YYYY-MM-DD hh:mm:ss.000,12345,1,260,W:Batt;W:Stuck;&quot;</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                sprintf(line, <span class="stringliteral">&quot;VERIFY,%s,%s,%d,%d,%s\n&quot;</span>, <a class="code" href="verify_8c.html#a7cbda1e80cfc1808d1046c5f205057af">formattedtime</a>(<a class="code" href="verify_8c.html#a2e7553abf9018c08271485321b610a54">now</a>()), label, passed, retval, description);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                fprintf(stderr, line);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            fprintf(stdout, line);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            fprintf(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>, line); </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            fflush(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(line);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="comment">/* Close the files */</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="group__reader.html#ga5b18b5c1ece6d59735788465c9731a59">OmReaderClose</a>(reader);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">/* Download updated */</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> verify_DownloadCallback(<span class="keywordtype">void</span> *reference, <span class="keywordtype">int</span> deviceId, <a class="code" href="group__data__download.html#gad6aad80d6e8baf74924dd57569266f21">OM_DOWNLOAD_STATUS</a> status, <span class="keywordtype">int</span> value)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="structdownload__t.html">download_t</a> *<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a> = (<a class="code" href="structdownload__t.html">download_t</a> *)reference;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">if</span> (status == <a class="code" href="group__data__download.html#ggad6aad80d6e8baf74924dd57569266f21a674c1fba749d46be7524f33cd4da5501">OM_DOWNLOAD_PROGRESS</a>)</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    { </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="comment">//printf(&quot;VERIFY #%d: Progress %d%%.\n&quot;, deviceId, value);</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">if</span> ((value % 5) == 0) { <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;&lt;#%d@%d%%&gt;&quot;</span>, deviceId, value); } <span class="comment">// report every 5%</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == <a class="code" href="group__data__download.html#ggad6aad80d6e8baf74924dd57569266f21a7e4a121cb71052f5607a6a7dd41df548">OM_DOWNLOAD_COMPLETE</a>)</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    { </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *file = <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordtype">int</span> verifyResult;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;VERIFY #%d: Download complete, verify starting... (options 0x%04x)\n&quot;</span>, deviceId, globalOptions);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        verifyResult = <a class="code" href="verify_8c.html#aa409e158736d8e67857beeeca69cd918">verify_process</a>(deviceId, file, <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>, globalOptions);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keywordflow">if</span> (verifyResult &lt; 0)                               </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        { </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <span class="keywordtype">char</span> line[128];</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            sprintf(line, <span class="stringliteral">&quot;#ERROR,%s,%d,Verify failed (%d)\n&quot;</span>, <a class="code" href="verify_8c.html#a7cbda1e80cfc1808d1046c5f205057af">formattedtime</a>(<a class="code" href="verify_8c.html#a2e7553abf9018c08271485321b610a54">now</a>()), deviceId, verifyResult);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            fprintf(stderr, line);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            fprintf(stdout, line);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a> != NULL) { fprintf(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>, line); fflush(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>); }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <a class="code" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a>(deviceId, <a class="code" href="verify_8c.html#a68952a88f882bddc8e58a27f4d7a9067">LED_ERROR_COMMS</a>);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (verifyResult &amp; <a class="code" href="verify_8c.html#aae1178706242a620a3ed8a13601ca692">CODE_ERROR_MASK</a>)</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        { </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <a class="code" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a>(deviceId, <a class="code" href="verify_8c.html#a26cf826f0be3be67648377434f77d010">LED_FAILED</a>);                 <span class="comment">// Looks like a problem</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            <span class="comment">/* Set the session id (use the deviceId) */</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            result = <a class="code" href="group__settings.html#ga17e5d4d0d4c5a4f78d2b61bcf633fcd5">OmSetSessionId</a>(deviceId, 0);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;VERIFY #%d: Setting session id: %u\n&quot;</span>, deviceId, 0);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__return__codes.html#gaa07db56ead2f479f7f397f70fadd675d">OM_FAILED</a>(result)) { fprintf(stderr, <span class="stringliteral">&quot;ERROR: OmSetSessionId() %s\n&quot;</span>, <a class="code" href="group__return__codes.html#gacf8cd8926d77b109158af0b72f38f166">OmErrorString</a>(result)); }</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <span class="comment">/* Set the delayed start/stop times */</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;VERIFY #%d: Setting start/stop: INFINITY/ZERO\n&quot;</span>, deviceId);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            result = <a class="code" href="group__settings.html#ga8698fb98199565688deb2e8437560630">OmSetDelays</a>(deviceId, <a class="code" href="group__datetime.html#gaa4ae7008fd1bf32e1f8ee9fcab833d2b">OM_DATETIME_INFINITE</a>, <a class="code" href="group__datetime.html#gac48644f126458f1060a276c0cc64fd8e">OM_DATETIME_ZERO</a>);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__return__codes.html#gaa07db56ead2f479f7f397f70fadd675d">OM_FAILED</a>(result)) { fprintf(stderr, <span class="stringliteral">&quot;ERROR: OmSetDelays() %s\n&quot;</span>, <a class="code" href="group__return__codes.html#gacf8cd8926d77b109158af0b72f38f166">OmErrorString</a>(result)); }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            <span class="comment">/* Commit the new settings */</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;VERIFY #%d: Committing new settings...\n&quot;</span>, deviceId);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            result = <a class="code" href="group__settings.html#ga78e1863c9dae3ff0632baf88995255e3">OmEraseDataAndCommit</a>(deviceId, <a class="code" href="group__settings.html#gga8b228b1eebec0fcb36a7def6d4aa77fca56fdf905bd2f7bbeccb13e9f87431a48">OM_ERASE_QUICKFORMAT</a>);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__return__codes.html#gaa07db56ead2f479f7f397f70fadd675d">OM_FAILED</a>(result)) { fprintf(stderr, <span class="stringliteral">&quot;ERROR: OmEraseDataAndCommit() %s\n&quot;</span>, <a class="code" href="group__return__codes.html#gacf8cd8926d77b109158af0b72f38f166">OmErrorString</a>(result)); }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            <span class="comment">// Set LEDs</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            <span class="keywordflow">if</span> (verifyResult &amp; <a class="code" href="verify_8c.html#a05f05280e158d271060a30a74b2e9965">CODE_WARNING_MASK</a>) { <a class="code" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a>(deviceId, <a class="code" href="verify_8c.html#a4d2944306d880e747f002c6b28051148">LED_WARNING</a>); }            <span class="comment">// Warning</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <span class="keywordflow">else</span> { <a class="code" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a>(deviceId, <a class="code" href="verify_8c.html#adfbc06c2083b47ac3c2efe2934c9b285">LED_OK</a>); }                                           <span class="comment">// Everything ok</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == <a class="code" href="group__data__download.html#ggad6aad80d6e8baf74924dd57569266f21ab41602a1055806c0d15bc32a94f0c4a4">OM_DOWNLOAD_CANCELLED</a>)</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    { </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordtype">char</span> line[128];</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        sprintf(line, <span class="stringliteral">&quot;#ERROR,%s,%d,Download cancelled\n&quot;</span>, <a class="code" href="verify_8c.html#a7cbda1e80cfc1808d1046c5f205057af">formattedtime</a>(<a class="code" href="verify_8c.html#a2e7553abf9018c08271485321b610a54">now</a>()), deviceId);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        fprintf(stderr, line);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        fprintf(stdout, line);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a> != NULL) { fprintf(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>, line); fflush(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>); }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <a class="code" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a>(deviceId, <a class="code" href="verify_8c.html#a68952a88f882bddc8e58a27f4d7a9067">LED_ERROR_COMMS</a>);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == <a class="code" href="group__data__download.html#ggad6aad80d6e8baf74924dd57569266f21a6492b6c4f15e14bf19e2a4a0a9af2c8b">OM_DOWNLOAD_ERROR</a>) </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    { </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <span class="keywordtype">char</span> line[128];</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        sprintf(line, <span class="stringliteral">&quot;#ERROR,%s,%d,Download error (diagnostic 0x%04x)\n&quot;</span>, <a class="code" href="verify_8c.html#a7cbda1e80cfc1808d1046c5f205057af">formattedtime</a>(<a class="code" href="verify_8c.html#a2e7553abf9018c08271485321b610a54">now</a>()), deviceId, value);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        fprintf(stderr, line);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        fprintf(stdout, line);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a> != NULL) { fprintf(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>, line); fflush(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>); }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <a class="code" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a>(deviceId, <a class="code" href="verify_8c.html#a68952a88f882bddc8e58a27f4d7a9067">LED_ERROR_COMMS</a>);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    }</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordtype">char</span> line[128];</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        sprintf(line, <span class="stringliteral">&quot;#ERROR,%s,%d,Unexpected status %d / 0x%04x\n&quot;</span>, <a class="code" href="verify_8c.html#a7cbda1e80cfc1808d1046c5f205057af">formattedtime</a>(<a class="code" href="verify_8c.html#a2e7553abf9018c08271485321b610a54">now</a>()), deviceId, status, value);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        fprintf(stderr, line);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        fprintf(stdout, line);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a> != NULL) { fprintf(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>, line); fflush(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>); }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <a class="code" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a>(deviceId, <a class="code" href="verify_8c.html#a68952a88f882bddc8e58a27f4d7a9067">LED_ERROR_COMMS</a>);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="comment">// On any download event other than progress, alert the user</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">if</span> (status != <a class="code" href="group__data__download.html#ggad6aad80d6e8baf74924dd57569266f21a674c1fba749d46be7524f33cd4da5501">OM_DOWNLOAD_PROGRESS</a>)</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            <span class="keywordtype">char</span> oldTitle[2048];</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            <span class="keywordtype">char</span> newTitle[] = <span class="stringliteral">&quot;[ALERT]&quot;</span>;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            HWND hWnd = NULL;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            FLASHWINFO fwi = {0};</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            GetConsoleTitle(oldTitle, <span class="keyword">sizeof</span>(oldTitle));</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            SetConsoleTitle(newTitle);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;\a&quot;</span>);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            MessageBeep(0xffffffff);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <a class="code" href="deploy_8c.html#aa68c4155c864047dc2817d9b352d3899">Sleep</a>(40);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            hWnd = FindWindow(NULL, newTitle);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            SetConsoleTitle(oldTitle);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <span class="keywordflow">if</span> (hWnd != NULL)</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                fwi.cbSize = <span class="keyword">sizeof</span>(fwi);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                fwi.hwnd = hWnd;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                fwi.dwFlags = FLASHW_ALL;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                fwi.uCount = 3;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                fwi.dwTimeout = 0;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                FlashWindowEx(&amp;fwi);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;\a&quot;</span>);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;}</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">/* Device updated */</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> verify_DeviceCallback(<span class="keywordtype">void</span> *reference, <span class="keywordtype">int</span> deviceId, <a class="code" href="group__api__init.html#gab555d2e47896b6e3b4264d988871f455">OM_DEVICE_STATUS</a> status)</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;{</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">if</span> (status == <a class="code" href="group__api__init.html#ggab555d2e47896b6e3b4264d988871f455aeda9ede639632ea370deabe47daf25c1">OM_DEVICE_CONNECTED</a>)</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <span class="keywordtype">int</span> dataBlockSize = 0, dataOffsetBlocks = 0, dataNumBlocks = 0;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <a class="code" href="group__datetime.html#ga5ae96407571b49c6086be47907389dfc">OM_DATETIME</a> startTime = 0, endTime = 0;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;VERIFY #%d: Device CONNECTED (verify options 0x%04x)\n&quot;</span>, deviceId, globalOptions);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <span class="comment">/* Get the data range */</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        result = <a class="code" href="group__data__download.html#gad5bbce264a2594ba35fc0e661502a9c3">OmGetDataRange</a>(deviceId, &amp;dataBlockSize, &amp;dataOffsetBlocks, &amp;dataNumBlocks, &amp;startTime, &amp;endTime);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__return__codes.html#gaa07db56ead2f479f7f397f70fadd675d">OM_FAILED</a>(result)) { <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;ERROR: OmGetDataRange() %s\n&quot;</span>, <a class="code" href="group__return__codes.html#gacf8cd8926d77b109158af0b72f38f166">OmErrorString</a>(result)); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;VERIFY #%d: %d blocks data, at offset %d blocks (1 block = %d bytes)\n&quot;</span>, deviceId, dataNumBlocks, dataOffsetBlocks, dataBlockSize);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="comment">/* Display the data start and end times */</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            <span class="keywordtype">char</span> startString[<a class="code" href="group__datetime.html#ga6d65ff20aac74e619c65661bfdc9d99b">OM_DATETIME_BUFFER_SIZE</a>], endString[<a class="code" href="group__datetime.html#ga6d65ff20aac74e619c65661bfdc9d99b">OM_DATETIME_BUFFER_SIZE</a>];</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            OmDateTimeToString(startTime, startString);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            OmDateTimeToString(endTime, endString);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;VERIFY #%d: ... %s --&gt; %s\n&quot;</span>, deviceId, startString, endString);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="comment">/* Create reference handle */</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <a class="code" href="structdownload__t.html">download_t</a>* <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a> = (<a class="code" href="structdownload__t.html">download_t</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structdownload__t.html">download_t</a>));</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        memset(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="structdownload__t.html">download_t</a>));</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>* downloadPath = <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="comment">/* Get NAND information */</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;memoryHealth = <a class="code" href="group__device__status.html#ga037f3403839e450446875be5414ef146">OmGetMemoryHealth</a>(deviceId);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="preprocessor">#ifdef ID_NAND</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;nandType = -1;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        memset(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;nandId, 0, <span class="keyword">sizeof</span>(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;nandId));</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        result = OmGetNandId(deviceId, <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;nandId, NULL, &amp;<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;nandType);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="keywordflow">if</span> (result == <a class="code" href="group__return__codes.html#ga47220f5e8792e946e2c30270f0281955">OM_E_NOT_IMPLEMENTED</a>) { fprintf(stderr, <span class="stringliteral">&quot;NOTE: This firmware doesn&#39;t support NANDID command\n&quot;</span>); }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (result == <a class="code" href="group__return__codes.html#ga0ab836743057844f6170feb835565c0f">OM_E_UNEXPECTED_RESPONSE</a>) { fprintf(stderr, <span class="stringliteral">&quot;NOTE: Unexpected NANDID response (firmware probably doesn&#39;t support NANDID command)\n&quot;</span>); }</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160; </div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="comment">/* Allocate filename string */</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename = (<span class="keywordtype">char</span>*)malloc(strlen(downloadPath) + 64);  <span class="comment">/* downloadPath + &quot;/4294967295-65535.cwa&quot; + 1 (NULL-terminated) */</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="comment">/* Copy path, and platform-specific path separator char */</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        strcpy(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename, downloadPath);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename[strlen(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename) - 1] != <span class="charliteral">&#39;\\&#39;</span>) strcat(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename, <span class="stringliteral">&quot;\\&quot;</span>);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename[strlen(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename) - 1] != <span class="charliteral">&#39;/&#39;</span>) strcat(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename, <span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="comment">/* Append session-id and device-id as part of the filename */</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keywordflow">if</span> (deviceId &gt;= 0 &amp;&amp; deviceId &lt;= 9999)</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            sprintf(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename + strlen(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename), <span class="stringliteral">&quot;CWA-%04u.CWA&quot;</span>, deviceId);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (deviceId &gt;= 0 &amp;&amp; deviceId &lt;= 9999999)</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            sprintf(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename + strlen(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename), <span class="stringliteral">&quot;CWA-%07u.CWA&quot;</span>, deviceId);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            sprintf(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename + strlen(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename), <span class="stringliteral">&quot;CWA-%u.CWA&quot;</span>, deviceId);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="comment">/* Check if there&#39;s any data blocks stored (not just the headers) */</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="keywordflow">if</span> (dataNumBlocks - dataOffsetBlocks &lt;= 0)</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            <span class="comment">// TODO: fstat for date/time difference?</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            <span class="keywordflow">if</span> (access(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename, 0))</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;VERIFY #%d: Ignoring - no data stored, but local file already downloaded (manually check recent log): %s\n&quot;</span>, deviceId, <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                <span class="comment">//OmSetLed(deviceId, LED_ERROR_COMMS);                   // Error accessing data</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;VERIFY #%d: Ignoring - no data stored (no file already downloaded)\n&quot;</span>, deviceId);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                <a class="code" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a>(deviceId, <a class="code" href="verify_8c.html#a68952a88f882bddc8e58a27f4d7a9067">LED_ERROR_COMMS</a>);                   <span class="comment">// Error accessing data</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            free(<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>); <span class="comment">// TODO: If download-&gt;filename exists, call verify_DownloadCallback(OM_DOWNLOAD_COMPLETE, deviceId, OM_DOWNLOAD_COMPLETE, -1); // would need to do this in another thread though!</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        }</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <span class="comment">/* Begin download */</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <a class="code" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a>(deviceId, <a class="code" href="verify_8c.html#a311495df9e6d39d78c1eadab5b325782">LED_PROCESSING</a>);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;VERIFY #%d: Starting download to file: %s\n&quot;</span>, deviceId, <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                result = <a class="code" href="group__data__download.html#gaa272613cc8a6a4f4967f00a93e00cb57">OmBeginDownloadingReference</a>(deviceId, 0, -1, <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>-&gt;filename, <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__return__codes.html#gaa07db56ead2f479f7f397f70fadd675d">OM_FAILED</a>(result)) { <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;ERROR: OmBeginDownloading() %s\n&quot;</span>, <a class="code" href="group__return__codes.html#gacf8cd8926d77b109158af0b72f38f166">OmErrorString</a>(result)); }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            <span class="comment">/* Leave filename string for download complete to free... */</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    }</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == <a class="code" href="group__api__init.html#ggab555d2e47896b6e3b4264d988871f455a72503448642efecaf709c406653fc4e7">OM_DEVICE_REMOVED</a>)</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;VERIFY #%d: Device REMOVED\n&quot;</span>, deviceId);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <span class="comment">/* The download will have already been cancelled in the event of a device removal */</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <span class="comment">/*OmCancelDownload(deviceId);*/</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    {</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <a class="code" href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;VERIFY #%d: Error, unexpected status %d\n&quot;</span>, deviceId, status);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <a class="code" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a>(deviceId, <a class="code" href="verify_8c.html#a68952a88f882bddc8e58a27f4d7a9067">LED_ERROR_COMMS</a>);                   <span class="comment">// Error accessing data</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;}</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment">/* Record function */</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"><a class="line" href="verify_8c.html#abcfd72e7014e793901dc7aa90b8c806a"> 1060</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="verify_8c.html#abcfd72e7014e793901dc7aa90b8c806a">verify</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;{</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">/* Set device callback before API startup to get initially-connected devices through the callback */</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <a class="code" href="group__api__init.html#ga3ae947ab7a9580b19126d481248cf8a1">OmSetDeviceCallback</a>(verify_DeviceCallback, NULL);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="comment">/* Set download callback */</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="group__data__download.html#ga71136c4df0b0b7260786ba56b84be447">OmSetDownloadCallback</a>(verify_DownloadCallback, NULL);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="comment">/* Start the API */</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    result = <a class="code" href="group__api__init.html#ga782201920a152ac053bb1c7957d15742">OmStartup</a>(<a class="code" href="group__api__init.html#ga9aa7b592789bd8f1283e3ced60beb9f2">OM_VERSION</a>);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__return__codes.html#gaa07db56ead2f479f7f397f70fadd675d">OM_FAILED</a>(result)) { fprintf(stderr, <span class="stringliteral">&quot;ERROR: OmStartup() %s\n&quot;</span>, <a class="code" href="group__return__codes.html#gacf8cd8926d77b109158af0b72f38f166">OmErrorString</a>(result)); <span class="keywordflow">return</span> -1; }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="comment">/* Wait 5 seconds */</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <a class="code" href="deploy_8c.html#aa68c4155c864047dc2817d9b352d3899">Sleep</a>(60000);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;&lt;.&gt;&quot;</span>);</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    }</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">/* Shutdown the API */</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    result = <a class="code" href="group__api__init.html#ga93f9149aada32ac42fc9a082312c236b">OmShutdown</a>();</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__return__codes.html#gaa07db56ead2f479f7f397f70fadd675d">OM_FAILED</a>(result)) { fprintf(stderr, <span class="stringliteral">&quot;ERROR: OmShutdown() %s\n&quot;</span>, <a class="code" href="group__return__codes.html#gacf8cd8926d77b109158af0b72f38f166">OmErrorString</a>(result)); <span class="keywordflow">return</span> -1; }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="comment">/* Close the input and output files */</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a> != NULL) { fclose(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>); }</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;}</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment">/* Main function */</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"><a class="line" href="verify_8c.html#a3648b96888a861a4f0f61a7691cbda8f"> 1091</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="verify_8c.html#a3648b96888a861a4f0f61a7691cbda8f">verify_main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;{</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *outfilename = NULL;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordtype">int</span> ret = -1;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    fprintf(stderr, <span class="stringliteral">&quot;VERIFY: verify a specified binary data file contains sensible data.\n&quot;</span>);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    globalOptions = <a class="code" href="verify_8c.html#a416dcd5b28cb1f577ea27df5fa4c0ecb">VERIFY_OPTION_OUTPUT_NEW</a>;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">if</span> (argc &gt; 1)</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *infile = NULL;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <span class="comment">//char output = 0;</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160; </div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keywordflow">for</span> (i = 1; i &lt; argc; i++)</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">&quot;-headeronly&quot;</span>))</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                fprintf(stdout, <a class="code" href="verify_8c.html#ab7770a7f0d95e67620ff6ed347a07a56">HEADER</a>);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                <span class="keywordflow">return</span> -2;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">&quot;-stop-clear-all&quot;</span>)) { fprintf(stderr, <span class="stringliteral">&quot;VERIFY: Option -stop-clear-all\n&quot;</span>);    globalOptions |= <a class="code" href="verify_8c.html#aa728cb580efcc9b65ad8c235767e6b55">VERIFY_OPTION_ALL</a>; }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">&quot;-no-check-stop&quot;</span>))  { fprintf(stderr, <span class="stringliteral">&quot;VERIFY: Option -no-check-stop\n&quot;</span>);     globalOptions |= <a class="code" href="verify_8c.html#a7effaa29b4ebb804cf0890c15ec32508">VERIFY_OPTION_NO_CHECK_STOP</a>; }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">&quot;-output:new&quot;</span>))     { fprintf(stderr, <span class="stringliteral">&quot;VERIFY: Option -output:new\n&quot;</span>);        globalOptions |= <a class="code" href="verify_8c.html#a416dcd5b28cb1f577ea27df5fa4c0ecb">VERIFY_OPTION_OUTPUT_NEW</a>; }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">&quot;-output:old&quot;</span>))     { fprintf(stderr, <span class="stringliteral">&quot;VERIFY: Option -output:old\n&quot;</span>);        globalOptions &amp;= ~<a class="code" href="verify_8c.html#a416dcd5b28cb1f577ea27df5fa4c0ecb">VERIFY_OPTION_OUTPUT_NEW</a>; }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">&quot;-allow-restarts&quot;</span>)) { globalAllowedRestarts = atoi(argv[++i]); fprintf(stderr, <span class="stringliteral">&quot;VERIFY: Option -allow-restarts %d\n&quot;</span>, globalAllowedRestarts); }</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[i][0] == <span class="charliteral">&#39;-&#39;</span>)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                fprintf(stdout, <span class="stringliteral">&quot;ERROR: Unrecognized option %s\n&quot;</span>, argv[i]);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                <span class="keywordflow">return</span> -3;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            }</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (infile == NULL &amp;&amp; !(globalOptions &amp; <a class="code" href="verify_8c.html#aa728cb580efcc9b65ad8c235767e6b55">VERIFY_OPTION_ALL</a>))</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                infile = argv[i];</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            }</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (outfilename == NULL)</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                outfilename = argv[i];</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            }</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                fprintf(stdout, <span class="stringliteral">&quot;ERROR: Unexpected parameter %s\n&quot;</span>, argv[i]);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                <span class="keywordflow">return</span> -3;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="comment">/* Open the input and output files */</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="keywordflow">if</span> (outfilename != NULL)</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            <a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a> = fopen(outfilename, <span class="stringliteral">&quot;at&quot;</span>);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160; </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <span class="comment">//if (argc &gt; 2 &amp;&amp; !strcmp(argv[2], &quot;-output&quot;)) { output = 1; }</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="keywordflow">if</span> ((globalOptions &amp; <a class="code" href="verify_8c.html#aa728cb580efcc9b65ad8c235767e6b55">VERIFY_OPTION_ALL</a>) == 0)</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            <a class="code" href="structdownload__t.html">download_t</a> <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a> = { 0 };</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>.nandType = -1;     <span class="comment">// NAND ID not supported from data files</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            <a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>.memoryHealth = -1; <span class="comment">// memory health not supported from data files</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            ret = <a class="code" href="verify_8c.html#aa409e158736d8e67857beeeca69cd918">verify_process</a>(-1, infile, &amp;<a class="code" href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a>, globalOptions);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            <a class="code" href="verify_8c.html#abcfd72e7014e793901dc7aa90b8c806a">verify</a>();</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a> != NULL) { fclose(<a class="code" href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a>); }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    }</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Usage: verify &lt;&lt;binary-input-file&gt; | &lt;-stop-clear-all&gt; [outfile.csv] | &lt;-headeronly&gt;&gt; [-no-check-stop] [-allow-restarts &lt;n&gt;]\n&quot;</span>);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Where: binary-input-file: the name of the binary file to verify.\n&quot;</span>);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Example: verify data.cwa\n&quot;</span>);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="preprocessor">#if defined(_WIN32) &amp;&amp; defined(_DEBUG)</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="keywordflow">if</span> (IsDebuggerPresent()) { fprintf(stderr, <span class="stringliteral">&quot;Press [enter] to exit...&quot;</span>); getc(stdin); }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;}</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="averify_8c_html_af4688e72bd785bc4a67b09a13140140e"><div class="ttname"><a href="verify_8c.html#af4688e72bd785bc4a67b09a13140140e">CODE_ERROR_RATE</a></div><div class="ttdeci">#define CODE_ERROR_RATE</div></div>
<div class="ttc" id="agroup__settings_html_ga17e5d4d0d4c5a4f78d2b61bcf633fcd5"><div class="ttname"><a href="group__settings.html#ga17e5d4d0d4c5a4f78d2b61bcf633fcd5">OmSetSessionId</a></div><div class="ttdeci">int OmSetSessionId(int deviceId, unsigned int sessionId)</div><div class="ttdoc">Sets the specified device's session identifier to be used at the next recording session.</div></div>
<div class="ttc" id="agroup__datetime_html_ga9425fb8aff47067802c577dd84bda413"><div class="ttname"><a href="group__datetime.html#ga9425fb8aff47067802c577dd84bda413">OM_DATETIME_FROM_YMDHMS</a></div><div class="ttdeci">#define OM_DATETIME_FROM_YMDHMS(year, month, day, hours, minutes, seconds)</div><div class="ttdoc">Macro to create a packed date/time value from components.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01073">omapi.h:1073</a></div></div>
<div class="ttc" id="agroup__datetime_html_gaa4ae7008fd1bf32e1f8ee9fcab833d2b"><div class="ttname"><a href="group__datetime.html#gaa4ae7008fd1bf32e1f8ee9fcab833d2b">OM_DATETIME_INFINITE</a></div><div class="ttdeci">#define OM_DATETIME_INFINITE</div><div class="ttdoc">Special date/time value for &quot;infinitely late&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01090">omapi.h:1090</a></div></div>
<div class="ttc" id="averify_8c_html_ab47f01a45c9f99599b41d7f615a9a4b5"><div class="ttname"><a href="verify_8c.html#ab47f01a45c9f99599b41d7f615a9a4b5">CODE_ERROR_EVENT</a></div><div class="ttdeci">#define CODE_ERROR_EVENT</div></div>
<div class="ttc" id="agroup__api__init_html_ggab555d2e47896b6e3b4264d988871f455a72503448642efecaf709c406653fc4e7"><div class="ttname"><a href="group__api__init.html#ggab555d2e47896b6e3b4264d988871f455a72503448642efecaf709c406653fc4e7">OM_DEVICE_REMOVED</a></div><div class="ttdoc">Device is being removed, or is already removed.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00289">omapi.h:289</a></div></div>
<div class="ttc" id="averify_8c_html_a49f37a4370cde955d01eeae6e789c6e2"><div class="ttname"><a href="verify_8c.html#a49f37a4370cde955d01eeae6e789c6e2">CODE_ERROR_NANDHEALTH</a></div><div class="ttdeci">#define CODE_ERROR_NANDHEALTH</div></div>
<div class="ttc" id="agroup__api__init_html_ggab555d2e47896b6e3b4264d988871f455aeda9ede639632ea370deabe47daf25c1"><div class="ttname"><a href="group__api__init.html#ggab555d2e47896b6e3b4264d988871f455aeda9ede639632ea370deabe47daf25c1">OM_DEVICE_CONNECTED</a></div><div class="ttdoc">Device has been connected.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00290">omapi.h:290</a></div></div>
<div class="ttc" id="averify_8c_html_aaf94d307f92dbc5c2c619265b6935b30"><div class="ttname"><a href="verify_8c.html#aaf94d307f92dbc5c2c619265b6935b30">CODE_ERROR_STUCK</a></div><div class="ttdeci">#define CODE_ERROR_STUCK</div></div>
<div class="ttc" id="averify_8c_html_a2e7553abf9018c08271485321b610a54"><div class="ttname"><a href="verify_8c.html#a2e7553abf9018c08271485321b610a54">now</a></div><div class="ttdeci">unsigned long long now(void)</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00180">verify.c:180</a></div></div>
<div class="ttc" id="agroup__api__init_html_ga3ae947ab7a9580b19126d481248cf8a1"><div class="ttname"><a href="group__api__init.html#ga3ae947ab7a9580b19126d481248cf8a1">OmSetDeviceCallback</a></div><div class="ttdeci">int OmSetDeviceCallback(OmDeviceCallback deviceCallback, void *reference)</div><div class="ttdoc">Sets the callback function that is called whenever a device is added or removed.</div></div>
<div class="ttc" id="averify_8c_html_a416dcd5b28cb1f577ea27df5fa4c0ecb"><div class="ttname"><a href="verify_8c.html#a416dcd5b28cb1f577ea27df5fa4c0ecb">VERIFY_OPTION_OUTPUT_NEW</a></div><div class="ttdeci">#define VERIFY_OPTION_OUTPUT_NEW</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00080">verify.c:80</a></div></div>
<div class="ttc" id="agroup__return__codes_html_gacf8cd8926d77b109158af0b72f38f166"><div class="ttname"><a href="group__return__codes.html#gacf8cd8926d77b109158af0b72f38f166">OmErrorString</a></div><div class="ttdeci">const char * OmErrorString(int status)</div><div class="ttdoc">Returns an error string for the specified API return code.</div></div>
<div class="ttc" id="agroup__datetime_html_ga8316c5d8a510e084722b53694cb804a7"><div class="ttname"><a href="group__datetime.html#ga8316c5d8a510e084722b53694cb804a7">OM_DATETIME_MIN_VALID</a></div><div class="ttdeci">#define OM_DATETIME_MIN_VALID</div><div class="ttdoc">The minimum valid date/time value.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01087">omapi.h:1087</a></div></div>
<div class="ttc" id="averify_8c_html_a4d2944306d880e747f002c6b28051148"><div class="ttname"><a href="verify_8c.html#a4d2944306d880e747f002c6b28051148">LED_WARNING</a></div><div class="ttdeci">#define LED_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00073">verify.c:73</a></div></div>
<div class="ttc" id="aomapi_8h_html"><div class="ttname"><a href="omapi_8h.html">omapi.h</a></div><div class="ttdoc">Open Movement API.</div></div>
<div class="ttc" id="averify_8c_html_a3648b96888a861a4f0f61a7691cbda8f"><div class="ttname"><a href="verify_8c.html#a3648b96888a861a4f0f61a7691cbda8f">verify_main</a></div><div class="ttdeci">int verify_main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l01091">verify.c:1091</a></div></div>
<div class="ttc" id="agroup__device__status_html_ga037f3403839e450446875be5414ef146"><div class="ttname"><a href="group__device__status.html#ga037f3403839e450446875be5414ef146">OmGetMemoryHealth</a></div><div class="ttdeci">int OmGetMemoryHealth(int deviceId)</div><div class="ttdoc">Determine the health of the NAND flash memory on the specified device.</div></div>
<div class="ttc" id="agroup__datetime_html_ga5ae96407571b49c6086be47907389dfc"><div class="ttname"><a href="group__datetime.html#ga5ae96407571b49c6086be47907389dfc">OM_DATETIME</a></div><div class="ttdeci">unsigned long OM_DATETIME</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00332">omapi.h:332</a></div></div>
<div class="ttc" id="averify_8c_html_ac5b01ce406ab803b55eb603ed5416aff"><div class="ttname"><a href="verify_8c.html#ac5b01ce406ab803b55eb603ed5416aff">AVERAGE_RANGE_OFF</a></div><div class="ttdeci">#define AVERAGE_RANGE_OFF</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00086">verify.c:86</a></div></div>
<div class="ttc" id="astruct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t_html_a1f49c52e8909c794bc93f53e65db0b34"><div class="ttname"><a href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a1f49c52e8909c794bc93f53e65db0b34">OM_READER_HEADER_PACKET::loggingStartTime</a></div><div class="ttdeci">OM_DATETIME loggingStartTime</div><div class="ttdoc">@13 +4 Start time for delayed logging</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01300">omapi.h:1300</a></div></div>
<div class="ttc" id="agroup__reader_html_ggaa204b05abde6d663dd69cfc3d991221aadccdc8d7033943b79f62dfcb226c7d74"><div class="ttname"><a href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aadccdc8d7033943b79f62dfcb226c7d74">OM_VALUE_SCALE_GYRO</a></div><div class="ttdoc">Scaling: number of degrees per second that (2^15=)32768 represents: AX6= 2000, 1000,...</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01267">omapi.h:1267</a></div></div>
<div class="ttc" id="averify_8c_html_ab7645c49db407c0e2f00d2b7cba16113"><div class="ttname"><a href="verify_8c.html#ab7645c49db407c0e2f00d2b7cba16113">CODE_ERROR_RANGE</a></div><div class="ttdeci">#define CODE_ERROR_RANGE</div></div>
<div class="ttc" id="averify_8c_html_abcfd72e7014e793901dc7aa90b8c806a"><div class="ttname"><a href="verify_8c.html#abcfd72e7014e793901dc7aa90b8c806a">verify</a></div><div class="ttdeci">int verify(void)</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l01060">verify.c:1060</a></div></div>
<div class="ttc" id="averify_8c_html_ae705da34ceec812b223d4777b6b5088d"><div class="ttname"><a href="verify_8c.html#ae705da34ceec812b223d4777b6b5088d">Ticks</a></div><div class="ttdeci">unsigned long long Ticks(OM_DATETIME timestamp, unsigned short fractional)</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00173">verify.c:173</a></div></div>
<div class="ttc" id="agroup__data__download_html_ggad6aad80d6e8baf74924dd57569266f21a7e4a121cb71052f5607a6a7dd41df548"><div class="ttname"><a href="group__data__download.html#ggad6aad80d6e8baf74924dd57569266f21a7e4a121cb71052f5607a6a7dd41df548">OM_DOWNLOAD_COMPLETE</a></div><div class="ttdoc">Data download completed successfully.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00852">omapi.h:852</a></div></div>
<div class="ttc" id="agroup__reader_html_ggaa204b05abde6d663dd69cfc3d991221aae11e81ec3dbf78a362bf347e3b2bbc60"><div class="ttname"><a href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aae11e81ec3dbf78a362bf347e3b2bbc60">OM_VALUE_SCALE_ACCEL</a></div><div class="ttdoc">Scaling: number of units for 1g: CWA=256, AX6=2048 (+/-16g), 4096 (+/-8g), 8192 (+/-4g),...</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01266">omapi.h:1266</a></div></div>
<div class="ttc" id="agroup__return__codes_html_ga1f1c58d657a3bab4fd36dfc83eb253a7"><div class="ttname"><a href="group__return__codes.html#ga1f1c58d657a3bab4fd36dfc83eb253a7">OM_OK</a></div><div class="ttdeci">#define OM_OK</div><div class="ttdoc">Return code: Success.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01019">omapi.h:1019</a></div></div>
<div class="ttc" id="averify_8c_html_a080ac2194de86d8acfc23706d1c7d9de"><div class="ttname"><a href="verify_8c.html#a080ac2194de86d8acfc23706d1c7d9de">STUCK_COUNT</a></div><div class="ttdeci">#define STUCK_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00083">verify.c:83</a></div></div>
<div class="ttc" id="averify_8c_html_a0942f6e922b80b8632ddb02e2e93d3a7"><div class="ttname"><a href="verify_8c.html#a0942f6e922b80b8632ddb02e2e93d3a7">CODE_WARNING_NANDID</a></div><div class="ttdeci">#define CODE_WARNING_NANDID</div></div>
<div class="ttc" id="agroup__device__status_html_ga15580d1b8aa426a15915fb030518f8d4"><div class="ttname"><a href="group__device__status.html#ga15580d1b8aa426a15915fb030518f8d4">OmCommand</a></div><div class="ttdeci">int OmCommand(int deviceId, const char *command, char *buffer, size_t bufferSize, const char *expected, unsigned int timeoutMs, char **parseParts, int parseMax)</div><div class="ttdoc">Issues a direct command over the CDC port for a particular device.</div></div>
<div class="ttc" id="astruct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t_html"><div class="ttname"><a href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html">OM_READER_HEADER_PACKET</a></div><div class="ttdoc">Internal structure of a binary file header block.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01292">omapi.h:1292</a></div></div>
<div class="ttc" id="averify_8c_html_adfef4e7f048bfe602397574beae607a1"><div class="ttname"><a href="verify_8c.html#adfef4e7f048bfe602397574beae607a1">CODE_ERROR_LIGHT</a></div><div class="ttdeci">#define CODE_ERROR_LIGHT</div></div>
<div class="ttc" id="agroup__datetime_html_gaf4d3426bec2f1ac9dbce0965c7f6f7c8"><div class="ttname"><a href="group__datetime.html#gaf4d3426bec2f1ac9dbce0965c7f6f7c8">OM_DATETIME_MONTH</a></div><div class="ttdeci">#define OM_DATETIME_MONTH(dateTime)</div><div class="ttdoc">Extract the month (1-12) from a packed date/time value.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01082">omapi.h:1082</a></div></div>
<div class="ttc" id="astruct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t_html"><div class="ttname"><a href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html">OM_READER_DATA_PACKET</a></div><div class="ttdoc">Internal structure of a binary file data block.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01330">omapi.h:1330</a></div></div>
<div class="ttc" id="agroup__settings_html_gga8b228b1eebec0fcb36a7def6d4aa77fca56fdf905bd2f7bbeccb13e9f87431a48"><div class="ttname"><a href="group__settings.html#gga8b228b1eebec0fcb36a7def6d4aa77fca56fdf905bd2f7bbeccb13e9f87431a48">OM_ERASE_QUICKFORMAT</a></div><div class="ttdoc">Device file-system is re-created and a new data file is created with the current metadata.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00697">omapi.h:697</a></div></div>
<div class="ttc" id="averify_8c_html_aa728cb580efcc9b65ad8c235767e6b55"><div class="ttname"><a href="verify_8c.html#aa728cb580efcc9b65ad8c235767e6b55">VERIFY_OPTION_ALL</a></div><div class="ttdeci">#define VERIFY_OPTION_ALL</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00078">verify.c:78</a></div></div>
<div class="ttc" id="astruct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t_html_a071d790190e81b84380c397dabe0a2aa"><div class="ttname"><a href="struct_o_m___r_e_a_d_e_r___h_e_a_d_e_r___p_a_c_k_e_t.html#a071d790190e81b84380c397dabe0a2aa">OM_READER_HEADER_PACKET::loggingEndTime</a></div><div class="ttdeci">OM_DATETIME loggingEndTime</div><div class="ttdoc">@17 +4 Stop time for delayed logging</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01301">omapi.h:1301</a></div></div>
<div class="ttc" id="astruct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t_html_a6afb9ac2ccc07c1c5c4adb0ba40fe303"><div class="ttname"><a href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html#a6afb9ac2ccc07c1c5c4adb0ba40fe303">OM_READER_DATA_PACKET::events</a></div><div class="ttdeci">unsigned char events</div><div class="ttdoc">@22 +1 Event flags since last packet, b0 = resume logging, b1 = single-tap event, b2 = double-tap eve...</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01340">omapi.h:1340</a></div></div>
<div class="ttc" id="averify_8c_html_a33d2d34a79c2596bfa9c33f6e54cb6bf"><div class="ttname"><a href="verify_8c.html#a33d2d34a79c2596bfa9c33f6e54cb6bf">CODE_ERROR_STARTSTOP</a></div><div class="ttdeci">#define CODE_ERROR_STARTSTOP</div></div>
<div class="ttc" id="averify_8c_html_a7db2d12bf20b1347de3f6b65bf8e3a47"><div class="ttname"><a href="verify_8c.html#a7db2d12bf20b1347de3f6b65bf8e3a47">IGNORE_RECENT_RESTARTS</a></div><div class="ttdeci">#define IGNORE_RECENT_RESTARTS</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00088">verify.c:88</a></div></div>
<div class="ttc" id="averify_8c_html_aa4dbbc541c7d943b0c0ae7cbd7f48de8"><div class="ttname"><a href="verify_8c.html#aa4dbbc541c7d943b0c0ae7cbd7f48de8">CODE_ERROR_BREAKS</a></div><div class="ttdeci">#define CODE_ERROR_BREAKS</div></div>
<div class="ttc" id="agroup__datetime_html_ga3889bada708d70fdae157d910771230b"><div class="ttname"><a href="group__datetime.html#ga3889bada708d70fdae157d910771230b">OM_DATETIME_YEAR</a></div><div class="ttdeci">#define OM_DATETIME_YEAR(dateTime)</div><div class="ttdoc">Extract the year from a packed date/time value.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01081">omapi.h:1081</a></div></div>
<div class="ttc" id="astructdownload__t_html_a382038a20a14caf59d49cae7332cc969"><div class="ttname"><a href="structdownload__t.html#a382038a20a14caf59d49cae7332cc969">download_t::nandType</a></div><div class="ttdeci">int nandType</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00099">verify.c:99</a></div></div>
<div class="ttc" id="agroup__reader_html_ga1f48311f47268ee9532cbe9961bbcf18"><div class="ttname"><a href="group__reader.html#ga1f48311f47268ee9532cbe9961bbcf18">OmReaderNextBlock</a></div><div class="ttdeci">int OmReaderNextBlock(OmReaderHandle reader)</div><div class="ttdoc">Reads the next block of data from the binary file.</div></div>
<div class="ttc" id="agroup__reader_html_ga5b18b5c1ece6d59735788465c9731a59"><div class="ttname"><a href="group__reader.html#ga5b18b5c1ece6d59735788465c9731a59">OmReaderClose</a></div><div class="ttdeci">void OmReaderClose(OmReaderHandle reader)</div><div class="ttdoc">Closes the specified reader handle.</div></div>
<div class="ttc" id="agroup__return__codes_html_gaa07db56ead2f479f7f397f70fadd675d"><div class="ttname"><a href="group__return__codes.html#gaa07db56ead2f479f7f397f70fadd675d">OM_FAILED</a></div><div class="ttdeci">#define OM_FAILED(value)</div><div class="ttdoc">Macro to check the specified return value for failure.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01033">omapi.h:1033</a></div></div>
<div class="ttc" id="agroup__reader_html_ga46fddf401761dff1fd0976daf55c5df9"><div class="ttname"><a href="group__reader.html#ga46fddf401761dff1fd0976daf55c5df9">OmReaderGetValue</a></div><div class="ttdeci">int OmReaderGetValue(OmReaderHandle reader, OM_READER_VALUE_TYPE valueType)</div><div class="ttdoc">Returns a specific value type from the buffer read by OmReaderNextBlock().</div></div>
<div class="ttc" id="agroup__device__status_html_gae974d7eec0b9c41a1251dfa63d4ec671"><div class="ttname"><a href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a></div><div class="ttdeci">int OmSetLed(int deviceId, OM_LED_STATE ledState)</div><div class="ttdoc">Sets the specified device's LED colour.</div></div>
<div class="ttc" id="averify_8c_html_abc179cadee021dc6ca05b84fac044dab"><div class="ttname"><a href="verify_8c.html#abc179cadee021dc6ca05b84fac044dab">CODE_ERROR_RESTARTS</a></div><div class="ttdeci">#define CODE_ERROR_RESTARTS</div></div>
<div class="ttc" id="agroup__return__codes_html_gaa1ec7826762c2fe2c863363e3ac8c550"><div class="ttname"><a href="group__return__codes.html#gaa1ec7826762c2fe2c863363e3ac8c550">OM_E_FAIL</a></div><div class="ttdeci">#define OM_E_FAIL</div><div class="ttdoc">Return code: Unspecified failure.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01020">omapi.h:1020</a></div></div>
<div class="ttc" id="averify_8c_html_aae1178706242a620a3ed8a13601ca692"><div class="ttname"><a href="verify_8c.html#aae1178706242a620a3ed8a13601ca692">CODE_ERROR_MASK</a></div><div class="ttdeci">#define CODE_ERROR_MASK</div></div>
<div class="ttc" id="averify_8c_html_a5bd9dd6e4cf3c90a14c2553d25d1a316"><div class="ttname"><a href="verify_8c.html#a5bd9dd6e4cf3c90a14c2553d25d1a316">CODE_WARNING_NANDHEALTH</a></div><div class="ttdeci">#define CODE_WARNING_NANDHEALTH</div></div>
<div class="ttc" id="agroup__return__codes_html_ga0ab836743057844f6170feb835565c0f"><div class="ttname"><a href="group__return__codes.html#ga0ab836743057844f6170feb835565c0f">OM_E_UNEXPECTED_RESPONSE</a></div><div class="ttdeci">#define OM_E_UNEXPECTED_RESPONSE</div><div class="ttdoc">Return code: Device response was not as expected.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01030">omapi.h:1030</a></div></div>
<div class="ttc" id="averify_8c_html_a7cbda1e80cfc1808d1046c5f205057af"><div class="ttname"><a href="verify_8c.html#a7cbda1e80cfc1808d1046c5f205057af">formattedtime</a></div><div class="ttdeci">const char * formattedtime(unsigned long long milliseconds)</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00188">verify.c:188</a></div></div>
<div class="ttc" id="agroup__datetime_html_ga09d645a3f7989b65fcc9e9c045c8798a"><div class="ttname"><a href="group__datetime.html#ga09d645a3f7989b65fcc9e9c045c8798a">OM_DATETIME_DAY</a></div><div class="ttdeci">#define OM_DATETIME_DAY(dateTime)</div><div class="ttdoc">Extract the day (1-31) from a packed date/time value.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01083">omapi.h:1083</a></div></div>
<div class="ttc" id="agroup__return__codes_html_ga47220f5e8792e946e2c30270f0281955"><div class="ttname"><a href="group__return__codes.html#ga47220f5e8792e946e2c30270f0281955">OM_E_NOT_IMPLEMENTED</a></div><div class="ttdeci">#define OM_E_NOT_IMPLEMENTED</div><div class="ttdoc">Return code: Requested functionality not implemented, either at the API level on this platform or the...</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01026">omapi.h:1026</a></div></div>
<div class="ttc" id="agroup__datetime_html_gae5d26861be6dc34e6f369496a8f87252"><div class="ttname"><a href="group__datetime.html#gae5d26861be6dc34e6f369496a8f87252">OM_DATETIME_HOURS</a></div><div class="ttdeci">#define OM_DATETIME_HOURS(dateTime)</div><div class="ttdoc">Extract the hours (0-23) from a packed date/time value.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01084">omapi.h:1084</a></div></div>
<div class="ttc" id="averify_8c_html_a6a47fe8bb868cbdbb78ae0240a7ee883"><div class="ttname"><a href="verify_8c.html#a6a47fe8bb868cbdbb78ae0240a7ee883">CODE_WARNING_RATE</a></div><div class="ttdeci">#define CODE_WARNING_RATE</div></div>
<div class="ttc" id="averify_8c_html_aa0a4352c636f3aa6f63296673baaf4c4"><div class="ttname"><a href="verify_8c.html#aa0a4352c636f3aa6f63296673baaf4c4">CODE_WARNING_LIGHT</a></div><div class="ttdeci">#define CODE_WARNING_LIGHT</div></div>
<div class="ttc" id="averify_8c_html_a311495df9e6d39d78c1eadab5b325782"><div class="ttname"><a href="verify_8c.html#a311495df9e6d39d78c1eadab5b325782">LED_PROCESSING</a></div><div class="ttdeci">#define LED_PROCESSING</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00071">verify.c:71</a></div></div>
<div class="ttc" id="agroup__data__download_html_gaa272613cc8a6a4f4967f00a93e00cb57"><div class="ttname"><a href="group__data__download.html#gaa272613cc8a6a4f4967f00a93e00cb57">OmBeginDownloadingReference</a></div><div class="ttdeci">int OmBeginDownloadingReference(int deviceId, int dataOffsetBlocks, int dataLengthBlocks, const char *destinationFile, void *reference)</div><div class="ttdoc">Begin downloading the data from the current device, passing an additional reference.</div></div>
<div class="ttc" id="averify_8c_html_a487b6057583dc10b18e976efacbe9edd"><div class="ttname"><a href="verify_8c.html#a487b6057583dc10b18e976efacbe9edd">AVERAGE_RANGE_MAX</a></div><div class="ttdeci">#define AVERAGE_RANGE_MAX</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00085">verify.c:85</a></div></div>
<div class="ttc" id="agroup__datetime_html_gac48644f126458f1060a276c0cc64fd8e"><div class="ttname"><a href="group__datetime.html#gac48644f126458f1060a276c0cc64fd8e">OM_DATETIME_ZERO</a></div><div class="ttdeci">#define OM_DATETIME_ZERO</div><div class="ttdoc">Special date/time value for &quot;infinitely early&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01089">omapi.h:1089</a></div></div>
<div class="ttc" id="agroup__reader_html_ggaa204b05abde6d663dd69cfc3d991221aa9b1e8a3924e1cd67c2bb0ec41419d438"><div class="ttname"><a href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aa9b1e8a3924e1cd67c2bb0ec41419d438">OM_VALUE_ACCEL_AXIS</a></div><div class="ttdoc">Axis index for Accel-X (-Y and -Z follow), AX3=0, AX6(A)=0, AX6(GA/GAM)=3, not-present=-1.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01269">omapi.h:1269</a></div></div>
<div class="ttc" id="agroup__data__download_html_ggad6aad80d6e8baf74924dd57569266f21a6492b6c4f15e14bf19e2a4a0a9af2c8b"><div class="ttname"><a href="group__data__download.html#ggad6aad80d6e8baf74924dd57569266f21a6492b6c4f15e14bf19e2a4a0a9af2c8b">OM_DOWNLOAD_ERROR</a></div><div class="ttdoc">Data download failed with an error (the value parameter to OmDownloadCallback indicates a diagnostic ...</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00850">omapi.h:850</a></div></div>
<div class="ttc" id="agroup__api__init_html_ga9aa7b592789bd8f1283e3ced60beb9f2"><div class="ttname"><a href="group__api__init.html#ga9aa7b592789bd8f1283e3ced60beb9f2">OM_VERSION</a></div><div class="ttdeci">#define OM_VERSION</div><div class="ttdoc">A numeric code for current API version defined in this header file.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00225">omapi.h:225</a></div></div>
<div class="ttc" id="agroup__reader_html_ggaa204b05abde6d663dd69cfc3d991221aaf80d7147f8a2cc700c5467aed38cfd46"><div class="ttname"><a href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aaf80d7147f8a2cc700c5467aed38cfd46">OM_VALUE_GYRO_AXIS</a></div><div class="ttdoc">Axis index for Gyro-X (-Y and -Z follow), AX6(GA/GAM)=0, not-present=-1.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01270">omapi.h:1270</a></div></div>
<div class="ttc" id="astructdownload__t_html_aa516162e3010d50a13f5003009c99bb2"><div class="ttname"><a href="structdownload__t.html#aa516162e3010d50a13f5003009c99bb2">download_t::memoryHealth</a></div><div class="ttdeci">int memoryHealth</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00096">verify.c:96</a></div></div>
<div class="ttc" id="agroup__device__status_html_ga38d39fc1b239750481a9e1d1e09d3d3a"><div class="ttname"><a href="group__device__status.html#ga38d39fc1b239750481a9e1d1e09d3d3a">OM_MEMORY_HEALTH_ERROR</a></div><div class="ttdeci">#define OM_MEMORY_HEALTH_ERROR</div><div class="ttdoc">Threshold at or below which the OmGetMemoryHealth() result should be treated as a failure.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00431">omapi.h:431</a></div></div>
<div class="ttc" id="averify_8c_html_acb7fecf71678c05a6d44f6d2bbaeb806"><div class="ttname"><a href="verify_8c.html#acb7fecf71678c05a6d44f6d2bbaeb806">CODE_WARNING_RESTARTS</a></div><div class="ttdeci">#define CODE_WARNING_RESTARTS</div></div>
<div class="ttc" id="averify_8c_html_ae2df1666d95c8020844a9d9817b25a9c"><div class="ttname"><a href="verify_8c.html#ae2df1666d95c8020844a9d9817b25a9c">CODE_ERROR_FILE</a></div><div class="ttdeci">#define CODE_ERROR_FILE</div></div>
<div class="ttc" id="agroup__reader_html_ga616368cf0b2303d56d7c1406e7aaff47"><div class="ttname"><a href="group__reader.html#ga616368cf0b2303d56d7c1406e7aaff47">OmReaderRawHeaderPacket</a></div><div class="ttdeci">OM_READER_HEADER_PACKET * OmReaderRawHeaderPacket(OmReaderHandle reader)</div><div class="ttdoc">Accesses the contents of a raw header packet.</div></div>
<div class="ttc" id="averify_8c_html_aa409e158736d8e67857beeeca69cd918"><div class="ttname"><a href="verify_8c.html#aa409e158736d8e67857beeeca69cd918">verify_process</a></div><div class="ttdeci">int verify_process(int id, const char *infile, download_t *download, int globalOptions)</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00210">verify.c:210</a></div></div>
<div class="ttc" id="agroup__datetime_html_gaf89fa3e164311c43b62cf12297a38dbd"><div class="ttname"><a href="group__datetime.html#gaf89fa3e164311c43b62cf12297a38dbd">OM_DATETIME_SECONDS</a></div><div class="ttdeci">#define OM_DATETIME_SECONDS(dateTime)</div><div class="ttdoc">Extract the seconds (0-59) from a packed date/time value.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01086">omapi.h:1086</a></div></div>
<div class="ttc" id="astructdownload__t_html_a09c8ff5eedafe72a573fa656b27a9e5b"><div class="ttname"><a href="structdownload__t.html#a09c8ff5eedafe72a573fa656b27a9e5b">download_t::hasGyro</a></div><div class="ttdeci">bool hasGyro</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00102">verify.c:102</a></div></div>
<div class="ttc" id="astruct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t_html_afe14e1641374ab41d47dd230114c1a93"><div class="ttname"><a href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html#afe14e1641374ab41d47dd230114c1a93">OM_READER_DATA_PACKET::timestamp</a></div><div class="ttdeci">OM_DATETIME timestamp</div><div class="ttdoc">@14 +4 Last reported RTC value, 0 = unknown</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01337">omapi.h:1337</a></div></div>
<div class="ttc" id="agroup__data__download_html_gad5bbce264a2594ba35fc0e661502a9c3"><div class="ttname"><a href="group__data__download.html#gad5bbce264a2594ba35fc0e661502a9c3">OmGetDataRange</a></div><div class="ttdeci">int OmGetDataRange(int deviceId, int *dataBlockSize, int *dataOffsetBlocks, int *dataNumBlocks, OM_DATETIME *startTime, OM_DATETIME *endTime)</div><div class="ttdoc">Read the size, time-range, and internal chunking of the data buffer.</div></div>
<div class="ttc" id="agroup__reader_html_gab8ee286a10180901a40d65647c2735e5"><div class="ttname"><a href="group__reader.html#gab8ee286a10180901a40d65647c2735e5">OmReaderTimestamp</a></div><div class="ttdeci">OM_DATETIME OmReaderTimestamp(OmReaderHandle reader, int index, unsigned short *fractional)</div><div class="ttdoc">Determines the timestamp of the specified sample in the buffer read by OmReaderNextBlock().</div></div>
<div class="ttc" id="agroup__data__download_html_ggad6aad80d6e8baf74924dd57569266f21a674c1fba749d46be7524f33cd4da5501"><div class="ttname"><a href="group__data__download.html#ggad6aad80d6e8baf74924dd57569266f21a674c1fba749d46be7524f33cd4da5501">OM_DOWNLOAD_PROGRESS</a></div><div class="ttdoc">Data download progress (the value parameter to OmDownloadCallback indicates progress percentage)</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00851">omapi.h:851</a></div></div>
<div class="ttc" id="adownload_8c_html_ad2eb277496af160238e7306fff780ad2"><div class="ttname"><a href="download_8c.html#ad2eb277496af160238e7306fff780ad2">printf</a></div><div class="ttdeci">#define printf(...)</div><div class="ttdef"><b>Definition:</b> <a href="download_8c_source.html#l00057">download.c:57</a></div></div>
<div class="ttc" id="averify_8c_html_ae59158a0d7601af531c36084d3305e0e"><div class="ttname"><a href="verify_8c.html#ae59158a0d7601af531c36084d3305e0e">CODE_WARNING_RANGE</a></div><div class="ttdeci">#define CODE_WARNING_RANGE</div></div>
<div class="ttc" id="agroup__api__init_html_ga93f9149aada32ac42fc9a082312c236b"><div class="ttname"><a href="group__api__init.html#ga93f9149aada32ac42fc9a082312c236b">OmShutdown</a></div><div class="ttdeci">int OmShutdown(void)</div><div class="ttdoc">Shuts down the Open Movement API.</div></div>
<div class="ttc" id="agroup__settings_html_ga8698fb98199565688deb2e8437560630"><div class="ttname"><a href="group__settings.html#ga8698fb98199565688deb2e8437560630">OmSetDelays</a></div><div class="ttdeci">int OmSetDelays(int deviceId, OM_DATETIME startTime, OM_DATETIME stopTime)</div><div class="ttdoc">Sets the specified device's delayed activation start and stop times to use for a new recording sessio...</div></div>
<div class="ttc" id="agroup__datetime_html_ga6d65ff20aac74e619c65661bfdc9d99b"><div class="ttname"><a href="group__datetime.html#ga6d65ff20aac74e619c65661bfdc9d99b">OM_DATETIME_BUFFER_SIZE</a></div><div class="ttdeci">#define OM_DATETIME_BUFFER_SIZE</div><div class="ttdoc">The size of a buffer to hold a string representation of an OM_DATETIME.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01093">omapi.h:1093</a></div></div>
<div class="ttc" id="agroup__device__status_html_gaa37095cecad3d86484511180435ee4cf"><div class="ttname"><a href="group__device__status.html#gaa37095cecad3d86484511180435ee4cf">OmGetDeviceSerial</a></div><div class="ttdeci">int OmGetDeviceSerial(int deviceId, char *serialBuffer)</div><div class="ttdoc">Return the full USB serial string identity for the specified device.</div></div>
<div class="ttc" id="agroup__reader_html_gafe29bdb2bf78d31ae1f75f7bc0ac542d"><div class="ttname"><a href="group__reader.html#gafe29bdb2bf78d31ae1f75f7bc0ac542d">OmReaderOpen</a></div><div class="ttdeci">OmReaderHandle OmReaderOpen(const char *binaryFilename)</div><div class="ttdoc">Opens a binary data file for reading.</div></div>
<div class="ttc" id="astructdownload__t_html_aeac90097f29f7529968697163cea5c18"><div class="ttname"><a href="structdownload__t.html#aeac90097f29f7529968697163cea5c18">download_t::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00101">verify.c:101</a></div></div>
<div class="ttc" id="averify_8c_html_a66a9c8e6289ed5bccdcc6ceb378c0155"><div class="ttname"><a href="verify_8c.html#a66a9c8e6289ed5bccdcc6ceb378c0155">CODE_ERROR_NANDID</a></div><div class="ttdeci">#define CODE_ERROR_NANDID</div></div>
<div class="ttc" id="agroup__datetime_html_ga6fd03816bcc340df126d7e77f02a7233"><div class="ttname"><a href="group__datetime.html#ga6fd03816bcc340df126d7e77f02a7233">OM_DATETIME_MINUTES</a></div><div class="ttdeci">#define OM_DATETIME_MINUTES(dateTime)</div><div class="ttdoc">Extract the minutes (0-59) from a packed date/time value.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01085">omapi.h:1085</a></div></div>
<div class="ttc" id="averify_8c_html_aec12350823454626adff6683e1a6c1ba"><div class="ttname"><a href="verify_8c.html#aec12350823454626adff6683e1a6c1ba">CODE_WARNING_BATT</a></div><div class="ttdeci">#define CODE_WARNING_BATT</div></div>
<div class="ttc" id="agroup__device__status_html_ga2e73da291028470f0afeb4ad971789f2"><div class="ttname"><a href="group__device__status.html#ga2e73da291028470f0afeb4ad971789f2">OM_MEMORY_HEALTH_WARNING</a></div><div class="ttdeci">#define OM_MEMORY_HEALTH_WARNING</div><div class="ttdoc">Threshold at or below which the OmGetMemoryHealth() result should be treated as a warning.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00432">omapi.h:432</a></div></div>
<div class="ttc" id="averify_8c_html_ad7545697ae629cfeeecc86e8c68ade6e"><div class="ttname"><a href="verify_8c.html#ad7545697ae629cfeeecc86e8c68ade6e">CODE_WARNING_EVENT</a></div><div class="ttdeci">#define CODE_WARNING_EVENT</div></div>
<div class="ttc" id="averify_8c_html_aefacc2c4c7de009175063549b07f27aa"><div class="ttname"><a href="verify_8c.html#aefacc2c4c7de009175063549b07f27aa">CODE_WARNING_FILE</a></div><div class="ttdeci">#define CODE_WARNING_FILE</div></div>
<div class="ttc" id="astruct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t_html_a265f19061707d45f04e154c7a8fc1334"><div class="ttname"><a href="struct_o_m___r_e_a_d_e_r___d_a_t_a___p_a_c_k_e_t.html#a265f19061707d45f04e154c7a8fc1334">OM_READER_DATA_PACKET::sequenceId</a></div><div class="ttdeci">unsigned int sequenceId</div><div class="ttdoc">@10 +4 Sequence counter, each packet has a new number (reset if restarted)</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01336">omapi.h:1336</a></div></div>
<div class="ttc" id="averify_8c_html_a6fcfbb45530c486fb628e6b16607adc0"><div class="ttname"><a href="verify_8c.html#a6fcfbb45530c486fb628e6b16607adc0">CODE_WARNING_BREAKS</a></div><div class="ttdeci">#define CODE_WARNING_BREAKS</div></div>
<div class="ttc" id="agroup__reader_html_gaa654dad2b5e252a2e9dbce771f50445e"><div class="ttname"><a href="group__reader.html#gaa654dad2b5e252a2e9dbce771f50445e">OmReaderHandle</a></div><div class="ttdeci">void * OmReaderHandle</div><div class="ttdoc">Handle to a reader object.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01127">omapi.h:1127</a></div></div>
<div class="ttc" id="agroup__datetime_html_ga48430ffa6f1834e1e2f148edf1c2d4de"><div class="ttname"><a href="group__datetime.html#ga48430ffa6f1834e1e2f148edf1c2d4de">OM_DATETIME_MAX_VALID</a></div><div class="ttdeci">#define OM_DATETIME_MAX_VALID</div><div class="ttdoc">The maximum valid date/time value.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01088">omapi.h:1088</a></div></div>
<div class="ttc" id="averify_8c_html_a05f05280e158d271060a30a74b2e9965"><div class="ttname"><a href="verify_8c.html#a05f05280e158d271060a30a74b2e9965">CODE_WARNING_MASK</a></div><div class="ttdeci">#define CODE_WARNING_MASK</div></div>
<div class="ttc" id="agroup__data__download_html_ggad6aad80d6e8baf74924dd57569266f21ab41602a1055806c0d15bc32a94f0c4a4"><div class="ttname"><a href="group__data__download.html#ggad6aad80d6e8baf74924dd57569266f21ab41602a1055806c0d15bc32a94f0c4a4">OM_DOWNLOAD_CANCELLED</a></div><div class="ttdoc">Data download was cancelled cleanly.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00853">omapi.h:853</a></div></div>
<div class="ttc" id="agroup__data__download_html_ga71136c4df0b0b7260786ba56b84be447"><div class="ttname"><a href="group__data__download.html#ga71136c4df0b0b7260786ba56b84be447">OmSetDownloadCallback</a></div><div class="ttdeci">int OmSetDownloadCallback(OmDownloadCallback downloadCallback, void *reference)</div><div class="ttdoc">Sets the callback function that is called for download progress, completion, cancellation,...</div></div>
<div class="ttc" id="averify_8c_html_adfbc06c2083b47ac3c2efe2934c9b285"><div class="ttname"><a href="verify_8c.html#adfbc06c2083b47ac3c2efe2934c9b285">LED_OK</a></div><div class="ttdeci">#define LED_OK</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00072">verify.c:72</a></div></div>
<div class="ttc" id="agroup__data__download_html_gad6aad80d6e8baf74924dd57569266f21"><div class="ttname"><a href="group__data__download.html#gad6aad80d6e8baf74924dd57569266f21">OM_DOWNLOAD_STATUS</a></div><div class="ttdeci">OM_DOWNLOAD_STATUS</div><div class="ttdoc">Download states used in the OmDownloadCallback handler.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00847">omapi.h:847</a></div></div>
<div class="ttc" id="adeploy_8c_html_aa68c4155c864047dc2817d9b352d3899"><div class="ttname"><a href="deploy_8c.html#aa68c4155c864047dc2817d9b352d3899">Sleep</a></div><div class="ttdeci">#define Sleep(millis)</div><div class="ttdef"><b>Definition:</b> <a href="deploy_8c_source.html#l00049">deploy.c:49</a></div></div>
<div class="ttc" id="agroup__reader_html_ggaa204b05abde6d663dd69cfc3d991221aa84d5f7c960867b1f97ab0e42eb2abcd7"><div class="ttname"><a href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aa84d5f7c960867b1f97ab0e42eb2abcd7">OM_VALUE_AXES</a></div><div class="ttdoc">Number of axes per sample.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01265">omapi.h:1265</a></div></div>
<div class="ttc" id="agroup__api__init_html_ga782201920a152ac053bb1c7957d15742"><div class="ttname"><a href="group__api__init.html#ga782201920a152ac053bb1c7957d15742">OmStartup</a></div><div class="ttdeci">int OmStartup(int version)</div><div class="ttdoc">Initializes the Open Movement API.</div></div>
<div class="ttc" id="agroup__reader_html_ga68ef443d4bad40afb7f52bc9f5bb0f71"><div class="ttname"><a href="group__reader.html#ga68ef443d4bad40afb7f52bc9f5bb0f71">OmReaderBuffer</a></div><div class="ttdeci">short * OmReaderBuffer(OmReaderHandle reader)</div><div class="ttdoc">Obtains a pointer to the buffer of samples read, and unpacked, by OmReaderNextBlock().</div></div>
<div class="ttc" id="averify_8c_html_a3a7d022453c48aa45f51161cdf30f52c"><div class="ttname"><a href="verify_8c.html#a3a7d022453c48aa45f51161cdf30f52c">CODE_WARNING_STUCK</a></div><div class="ttdeci">#define CODE_WARNING_STUCK</div></div>
<div class="ttc" id="adownload_8c_html_a3da4d31c012bf1d4417b9257a9af7389"><div class="ttname"><a href="download_8c.html#a3da4d31c012bf1d4417b9257a9af7389">download</a></div><div class="ttdeci">int download(const char *outpath)</div><div class="ttdef"><b>Definition:</b> <a href="download_8c_source.html#l00174">download.c:174</a></div></div>
<div class="ttc" id="averify_8c_html_a7effaa29b4ebb804cf0890c15ec32508"><div class="ttname"><a href="verify_8c.html#a7effaa29b4ebb804cf0890c15ec32508">VERIFY_OPTION_NO_CHECK_STOP</a></div><div class="ttdeci">#define VERIFY_OPTION_NO_CHECK_STOP</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00079">verify.c:79</a></div></div>
<div class="ttc" id="averify_8c_html_a489b573f8657cc4a892f86b80c1aa608"><div class="ttname"><a href="verify_8c.html#a489b573f8657cc4a892f86b80c1aa608">AVERAGE_FACTOR</a></div><div class="ttdeci">#define AVERAGE_FACTOR</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00084">verify.c:84</a></div></div>
<div class="ttc" id="agroup__reader_html_ga8ab9d544730fc97372a1b9dee3f5409e"><div class="ttname"><a href="group__reader.html#ga8ab9d544730fc97372a1b9dee3f5409e">OmReaderRawDataPacket</a></div><div class="ttdeci">OM_READER_DATA_PACKET * OmReaderRawDataPacket(OmReaderHandle reader)</div><div class="ttdoc">Accesses the contents of a raw data packet.</div></div>
<div class="ttc" id="agroup__settings_html_ga78e1863c9dae3ff0632baf88995255e3"><div class="ttname"><a href="group__settings.html#ga78e1863c9dae3ff0632baf88995255e3">OmEraseDataAndCommit</a></div><div class="ttdeci">int OmEraseDataAndCommit(int deviceId, OM_ERASE_LEVEL eraseLevel)</div><div class="ttdoc">Erases the specified device storage and commits the metadata and settings.</div></div>
<div class="ttc" id="agroup__data__download_html_gacb397cf74823bb9eb81d9efaace027c8"><div class="ttname"><a href="group__data__download.html#gacb397cf74823bb9eb81d9efaace027c8">OM_MAX_PATH</a></div><div class="ttdeci">#define OM_MAX_PATH</div><div class="ttdoc">Macro for the maximum path length of a data filename.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00840">omapi.h:840</a></div></div>
<div class="ttc" id="agroup__reader_html_ggaa204b05abde6d663dd69cfc3d991221aad9b82ee2308aed3bac11bc14ad228386"><div class="ttname"><a href="group__reader.html#ggaa204b05abde6d663dd69cfc3d991221aad9b82ee2308aed3bac11bc14ad228386">OM_VALUE_LIGHT</a></div><div class="ttdoc">Raw light sensor reading.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l01252">omapi.h:1252</a></div></div>
<div class="ttc" id="averify_8c_html_a68952a88f882bddc8e58a27f4d7a9067"><div class="ttname"><a href="verify_8c.html#a68952a88f882bddc8e58a27f4d7a9067">LED_ERROR_COMMS</a></div><div class="ttdeci">#define LED_ERROR_COMMS</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00075">verify.c:75</a></div></div>
<div class="ttc" id="averify_8c_html_a6feec3f725a91f10b280aff58481af2d"><div class="ttname"><a href="verify_8c.html#a6feec3f725a91f10b280aff58481af2d">CODE_WARNING_STARTSTOP</a></div><div class="ttdeci">#define CODE_WARNING_STARTSTOP</div></div>
<div class="ttc" id="averify_8c_html_ae581849c67336453bd5b81e6518019a9"><div class="ttname"><a href="verify_8c.html#ae581849c67336453bd5b81e6518019a9">outfile</a></div><div class="ttdeci">FILE * outfile</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00154">verify.c:154</a></div></div>
<div class="ttc" id="averify_8c_html_a8de45c9a7fed122dc2296f51879386bf"><div class="ttname"><a href="verify_8c.html#a8de45c9a7fed122dc2296f51879386bf">CODE_ERROR_BATT</a></div><div class="ttdeci">#define CODE_ERROR_BATT</div></div>
<div class="ttc" id="averify_8c_html_ab7770a7f0d95e67620ff6ed347a07a56"><div class="ttname"><a href="verify_8c.html#ab7770a7f0d95e67620ff6ed347a07a56">HEADER</a></div><div class="ttdeci">#define HEADER</div></div>
<div class="ttc" id="averify_8c_html_a28dd9d5ca8831cc4ddec9b135aba4505"><div class="ttname"><a href="verify_8c.html#a28dd9d5ca8831cc4ddec9b135aba4505">TimeSerial</a></div><div class="ttdeci">time_t TimeSerial(OM_DATETIME timestamp)</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00157">verify.c:157</a></div></div>
<div class="ttc" id="astructdownload__t_html"><div class="ttname"><a href="structdownload__t.html">download_t</a></div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00094">verify.c:94</a></div></div>
<div class="ttc" id="averify_8c_html_a26cf826f0be3be67648377434f77d010"><div class="ttname"><a href="verify_8c.html#a26cf826f0be3be67648377434f77d010">LED_FAILED</a></div><div class="ttdeci">#define LED_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="verify_8c_source.html#l00074">verify.c:74</a></div></div>
<div class="ttc" id="agroup__api__init_html_gab555d2e47896b6e3b4264d988871f455"><div class="ttname"><a href="group__api__init.html#gab555d2e47896b6e3b4264d988871f455">OM_DEVICE_STATUS</a></div><div class="ttdeci">OM_DEVICE_STATUS</div><div class="ttdoc">Device states used in the OmDeviceCallback handler.</div><div class="ttdef"><b>Definition:</b> <a href="omapi_8h_source.html#l00287">omapi.h:287</a></div></div>

    <li class="footer"><!-- Generated on Tue Aug 13 2019 12:59:06 for OMAPI by -->
    <a href="http://www.doxygen.org/index.html">doxygen</a> 1.8.16 </li>
   </ul>
 </div>
</body>
</html>
